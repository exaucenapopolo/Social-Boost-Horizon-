<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Statistiques - Social Boost Horizon</title>
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  
  <style>
    /* =======================================================
       GLOBAL STYLES & VARIABLES
       ======================================================= */
    :root {
      --sbh-dark-blue: #0A162B;
      --sbh-gradient-start: #1e3c72;
      --sbh-gradient-end: #6a0dad;
      --sbh-btn-color: #1E90FF;
      --sbh-btn-hover: #187bcd;
      --sbh-icon-color: #4CAF50;
      --sbh-text-white: #FFFFFF;
      --sbh-text-green: #4CAF50;
      --sbh-card-bg: rgba(17, 32, 58, 0.6);
      --sbh-card-border: rgba(255, 255, 255, 0.1);
      --sbh-text-light: rgba(255, 255, 255, 0.9);
      --sbh-accent: #FF6B6B;
      --sbh-light-blue: #4DA6FF;
      --sbh-error-red: #F44336;
      --sbh-success-green: #4CAF50;
    }

    body {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Roboto', sans-serif; /* Assurez-vous que cette police est chargée ou fallback */
      color: var(--sbh-text-white);
      background: var(--sbh-dark-blue);
      position: relative;
      min-height: 100vh;
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
    }

    /* Background Animation (Stars + Clouds) */
    .background-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background-color: var(--sbh-dark-blue);
      overflow: hidden;
    }
    .background-animation::before,
    .background-animation::after {
      content: "";
      position: absolute;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.4);
      animation: twinkle 5s infinite alternate;
    }
    .background-animation::before {
      width: 2px;
      height: 2px;
      box-shadow:
        100px  50px  0 0 white, 200px 150px  0 0 white, 300px 250px  0 0 white,
        400px  70px  0 0 white,  50px 300px  0 0 white, 350px 100px  0 0 white,
        500px 400px  0 0 white, 600px 120px  0 0 white, 700px 350px  0 0 white,
        80px  10px  0 0 white, 420px 220px 0 0 white, 680px 50px 0 0 white,
        150px 450px 0 0 white, 550px 320px 0 0 white, 220px 180px 0 0 white,
        780px 280px 0 0 white, 120px 70px 0 0 white, 480px 380px 0 0 white,
        850px 150px 0 0 white, 90px 390px 0 0 white;
      animation-delay: 0s;
    }
    .background-animation::after {
      width: 3px;
      height: 3px;
      box-shadow:
        150px 200px  0 0 white, 250px 300px  0 0 white,  50px 100px  0 0 white,
        300px  10px  0 0 white, 450px 200px  0 0 white,  10px 250px  0 0 white,
        550px  50px  0 0 white, 650px 280px  0 0 white, 750px  150px  0 0 white,
        20px  400px 0 0 white, 380px 180px 0 0 white, 620px 430px 0 0 white,
        250px 20px 0 0 white, 700px 480px 0 0 white, 330px 50px 0 0 white,
        800px 300px 0 0 white, 50px 500px 0 0 white, 900px 200px 0 0 white,
        180px 420px 0 0 white, 720px 100px 0 0 white;
      animation-delay: 2s;
    }
    @keyframes twinkle {
      0%   { opacity: 0.3; transform: scale(1); }
      50%  { opacity: 0.7; transform: scale(1.1); }
      100% { opacity: 0.3; transform: scale(1); }
    }
    .background-animation .cloud {
      position: absolute;
      background: white;
      border-radius: 50%;
      opacity: 0.1;
      filter: blur(20px);
      animation: moveClouds linear infinite;
    }
    @keyframes moveClouds {
      0%   { transform: translateX(0) scale(var(--scale, 1)); }
      100% { transform: translateX(calc(100vw + var(--width, 200px))) scale(var(--scale, 1)); }
    }

    /* Reset & Typography */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    h1, h2, h3 {
      font-family: 'Montserrat', sans-serif; /* Assurez-vous que cette police est chargée ou fallback */
      color: var(--sbh-text-white);
      text-align: center;
    }
    h1 {
      font-size: 2.5rem;
      margin-bottom: 1.5rem;
    }
    h2 {
      font-size: 1.8rem;
      margin-bottom: 1rem;
      position: relative;
      display: inline-block;
    }
    h2::after {
      content: "";
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 70px;
      height: 3px;
      background: linear-gradient(90deg, var(--sbh-gradient-start), var(--sbh-gradient-end));
      border-radius: 2px;
    }
    p {
      font-size: 0.95rem;
      color: var(--sbh-text-light);
      margin-bottom: 1rem;
      line-height: 1.6;
    }

    /* =======================================================
       HEADER & NAVIGATION
       ======================================================= */
    header {
      position: sticky;
      top: 0;
      background: linear-gradient(45deg, var(--sbh-gradient-start), var(--sbh-gradient-end));
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.8rem 1.5rem;
      z-index: 100;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      width: 100%;
      box-sizing: border-box;
    }
    .logo-text {
      display: flex;
      flex-direction: column;
      font-family: 'Poppins', sans-serif; /* Assurez-vous que cette police est chargée ou fallback */
      text-decoration: none;
      line-height: 1.1;
      flex-shrink: 0;
    }
    .logo-text .text-social,
    .logo-text .text-horizon {
      color: var(--sbh-text-white);
      font-size: 1.2rem;
      font-weight: 600;
    }
    .logo-text .boost-line {
      display: flex;
      align-items: center;
      color: var(--sbh-text-green);
      font-size: 1.6rem;
      font-weight: 800;
    }
    .logo-text .boost-line img {
      height: 1.6rem;
      margin-right: 0.3rem;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    .icon-hamburger {
      font-size: 1.6rem;
      color: var(--sbh-text-white);
      cursor: pointer;
      transition: transform 0.3s;
    }
    .icon-hamburger:hover {
      transform: scale(1.1);
    }
    .mobile-menu {
      display: none;
      position: absolute;
      top: 60px;
      right: 1.5rem;
      background: rgba(10, 22, 43, 0.95);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 10px;
      padding: 1rem;
      flex-direction: column;
      z-index: 200;
      min-width: 220px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }
    header.open .mobile-menu {
      display: flex;
    }
    .mobile-menu a {
      color: var(--sbh-text-white);
      text-decoration: none;
      padding: 0.7rem 0.8rem;
      font-weight: 500;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      font-size: 0.9rem;
    }
    .mobile-menu a:last-child {
      border-bottom: none;
    }
    .mobile-menu a i {
      margin-right: 8px;
      color: var(--sbh-light-blue);
      width: 20px;
      text-align: center;
    }
    .mobile-menu a:hover {
      background: rgba(30, 60, 114, 0.3);
      border-radius: 6px;
      transform: translateX(5px);
    }

    /* =======================================================
       MAIN CONTENT CONTAINER
       ======================================================= */
    .container {
      max-width: 1100px;
      margin: 25px auto;
      padding: 0 15px;
      box-sizing: border-box;
      flex-grow: 1; /* Permet au container de prendre l'espace disponible */
    }

    /* =======================================================
       FILTERS SECTION
       ======================================================= */
    .filters {
      display: flex;
      justify-content: space-around;
      margin-bottom: 25px;
      flex-wrap: wrap;
      gap: 15px;
      background: rgba(20, 35, 60, 0.6);
      padding: 15px;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.15);
    }
    .filter-group {
      display: flex;
      flex-direction: column;
      min-width: 180px;
      flex: 1;
      box-sizing: border-box;
    }
    .filter-group label {
      margin-bottom: 6px;
      font-weight: 500;
      font-size: 0.9rem;
    }
    .filter-group select {
      padding: 8px 12px;
      border-radius: 6px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(30, 60, 114, 0.4);
      color: white;
      font-size: 0.9rem;
      width: 100%;
      box-sizing: border-box;
      cursor: pointer;
    }
    .filter-group select option {
      background: var(--sbh-dark-blue);
    }
    
    /* Loader pour les mises à jour */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 999;
      color: white;
      font-size: 1.5rem;
      flex-direction: column;
      gap: 20px;
      display: none; /* Caché par défaut */
    }

    .loading-spinner {
      border: 6px solid #f3f3f3;
      border-top: 6px solid var(--sbh-btn-color);
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }


    /* =======================================================
       STATISTICS CARDS SECTION
       ======================================================= */
    .stats-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 25px;
      overflow-x: auto;
      padding-bottom: 10px;
    }
    .stat-card {
      background: rgba(20, 35, 60, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 12px;
      padding: 18px;
      text-align: center;
      transition: all 0.3s ease;
      box-sizing: border-box;
      min-width: 180px;
    }
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    }
    .stat-card i {
      font-size: 2rem;
      color: var(--sbh-icon-color);
      margin-bottom: 12px;
    }
    .stat-card .value {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 4px;
    }
    .stat-card .label {
      font-size: 1rem;
      color: rgba(255, 255, 255, 0.8);
    }
    .stat-card .trend {
      margin-top: 8px;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .trend.up {
      color: var(--sbh-success-green);
    }
    .trend.down {
      color: var(--sbh-error-red);
    }

    /* =======================================================
       CHARTS SECTION
       ======================================================= */
    .charts-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
      overflow-x: auto;
      padding-bottom: 10px;
      justify-content: center;
    }
    .chart-card {
      background: rgba(20, 35, 60, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 12px;
      padding: 18px;
      box-sizing: border-box;
      min-width: 300px;
    }
    .chart-card h3 {
      margin-top: 0;
      margin-bottom: 15px;
      text-align: center;
      font-size: 1.5rem;
    }
    .chart-container {
      position: relative;
      height: 280px;
      width: 100%;
      max-width: 100%;
      overflow: hidden;
    }

    /* =======================================================
       DATA TABLE SECTION
       ======================================================= */
    .data-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 30px;
      background: rgba(20, 35, 60, 0.6);
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.15);
      font-size: 0.9rem;
    }
    .data-table th {
      background: rgba(30, 60, 114, 0.5);
      padding: 12px 15px;
      text-align: left;
      font-weight: 600;
      font-size: 0.95rem;
    }
    .data-table td {
      padding: 10px 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    .data-table tr:last-child td {
      border-bottom: none;
    }
    .data-table tr:hover {
      background: rgba(30, 60, 114, 0.3);
    }
    .platform-cell {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .platform-icon {
      font-size: 1.3rem;
    }

    /* =======================================================
       BUTTONS
       ======================================================= */
    .btn {
      display: inline-block;
      background: linear-gradient(45deg, var(--sbh-gradient-start), var(--sbh-btn-color));
      color: #fff;
      padding: 9px 18px;
      border: none;
      border-radius: 40px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      font-family: 'Montserrat', sans-serif;
      font-size: 0.95rem;
      box-shadow: 0 3px 12px rgba(30, 144, 255, 0.3);
      cursor: pointer;
      white-space: nowrap;
    }
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 18px rgba(30, 144, 255, 0.4);
      background: linear-gradient(45deg, var(--sbh-gradient-start), #2a7fff);
    }
    .btn-export {
      background: linear-gradient(45deg, #6a0dad, #9c27b0);
      margin-top: 15px;
    }
    .btn-export:hover {
      background: linear-gradient(45deg, #9c27b0, #6a0dad);
    }
    .btn-group {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
      flex-wrap: wrap;
      box-sizing: border-box;
    }
    #logoutBtn {
      padding: 7px 14px;
      font-size: 0.85rem;
      border-radius: 40px;
      background: linear-gradient(45deg, #dc3545, #c82333); /* Rouge pour déconnexion */
      box-shadow: 0 3px 12px rgba(220, 53, 69, 0.3);
    }
    #logoutBtn:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 18px rgba(220, 53, 69, 0.4);
      background: linear-gradient(45deg, #c82333, #dc3545);
    }

    /* =======================================================
       FOOTER
       ======================================================= */
    footer {
      background: linear-gradient(to right, var(--sbh-gradient-start), var(--sbh-gradient-end));
      color: var(--sbh-text-white);
      padding: 2.5rem 1rem 1.2rem;
      margin-top: 40px;
      position: relative;
      overflow: hidden;
      width: 100%;
      box-sizing: border-box;
    }
    .footer-content {
      max-width: 1100px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      box-sizing: border-box;
    }
    .footer-section {
      padding: 0 0.8rem;
      box-sizing: border-box;
    }
    .footer-section h3 {
      font-size: 1.2rem;
      margin-bottom: 1rem;
      text-align: left;
      position: relative;
      padding-bottom: 6px;
    }
    .footer-section h3::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      width: 35px;
      height: 2px;
      background: var(--sbh-text-green);
    }
    .footer-logo {
      display: flex;
      flex-direction: column;
      margin-bottom: 1rem;
    }
    .footer-logo .text-social,
    .footer-logo .text-horizon {
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      color: var(--sbh-text-white);
      font-size: 1.1rem;
    }
    .footer-logo .boost-line {
      display: flex;
      align-items: center;
      color: var(--sbh-text-green);
      font-weight: 800;
      font-size: 1.5rem;
    }
    .footer-logo .boost-line img {
      height: 1.5rem;
      margin-right: 0.3rem;
    }
    .footer-about p {
      text-align: left;
      font-size: 0.85rem;
      line-height: 1.6;
    }
    .footer-links ul {
      list-style: none;
      padding: 0;
    }
    .footer-links li {
      margin-bottom: 0.6rem;
    }
    .footer-links a {
      color: rgba(255, 255, 255, 0.85);
      text-decoration: none;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      font-size: 0.9rem;
    }
    .footer-links a i {
      margin-right: 6px;
      color: var(--sbh-light-blue);
      transition: transform 0.3s;
      width: 16px;
      text-align: center;
    }
    .footer-links a:hover {
      color: var(--sbh-text-white);
      transform: translateX(3px);
    }
    .footer-links a:hover i {
      transform: translateX(3px);
    }
    .footer-contact p {
      text-align: left;
      margin-bottom: 0.7rem;
      display: flex;
      align-items: center;
      font-size: 0.9rem;
    }
    .footer-contact i {
      margin-right: 6px;
      color: var(--sbh-light-blue);
      width: 16px;
      text-align: center;
    }
    .social-icons {
      display: flex;
      gap: 10px;
      margin-top: 1rem;
    }
    .social-icons a {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      display: flex;
      justify-content: center;
      align-items: center;
      color: var(--sbh-text-white);
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }
    .social-icons a:hover {
      background: var(--sbh-btn-color);
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(30, 144, 255, 0.3);
    }
    .footer-newsletter p {
      text-align: left;
      margin-bottom: 1rem;
      font-size: 0.9rem;
    }
    .newsletter-form {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }
    .newsletter-form input {
      padding: 9px 10px;
      border-radius: 5px;
      font-size: 0.85rem;
      flex: 1;
      min-width: 150px;
      box-sizing: border-box;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(30, 60, 114, 0.4);
      color: white;
    }
    .newsletter-form .btn {
      padding: 9px;
      font-size: 0.9rem;
      border-radius: 5px;
      flex-shrink: 0;
    }

    .footer-bottom {
      max-width: 1100px;
      margin: 1.5rem auto 0;
      padding-top: 1rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      gap: 0.8rem;
      box-sizing: border-box;
    }
    .footer-bottom p {
      margin: 0;
      font-size: 0.8rem;
      color: rgba(255, 255, 255, 0.7);
      text-align: left;
    }
    .footer-bottom a {
      font-size: 0.8rem;
      color: rgba(255, 255, 255, 0.7);
      text-decoration: none;
      transition: color 0.3s ease;
    }
    .footer-bottom a:hover {
      color: var(--sbh-text-white);
    }
    .payment-methods {
      gap: 6px;
      display: flex;
    }
    .payment-methods i {
      font-size: 1.4rem;
      color: rgba(255, 255, 255, 0.7);
    }

    /* =======================================================
       RESPONSIVE DESIGN
       ======================================================= */
    @media (max-width: 768px) {
      .filters {
        flex-direction: column;
        padding: 10px;
      }
      .filter-group {
        min-width: unset;
        width: 100%;
      }
      .chart-card {
        padding: 15px;
      }
      .chart-container {
        height: 250px;
      }
      .stats-cards {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 10px;
      }
      .stat-card .value {
        font-size: 1.6rem;
      }
      .stat-card .label {
        font-size: 0.95rem;
      }
      .chart-card h3 {
        font-size: 1.3rem;
      }
      .footer-content {
        grid-template-columns: 1fr;
        gap: 1rem;
      }
      .footer-section {
        padding: 0 1rem;
        text-align: center;
      }
      .footer-section h3 {
        text-align: center;
      }
      .footer-section h3::after {
        left: 50%;
        transform: translateX(-50%);
      }
      .footer-about p,
      .footer-contact p,
      .footer-newsletter p {
        text-align: center;
      }
      .social-icons, .footer-links ul {
        justify-content: center;
      }
      .footer-links a, .footer-contact p {
        justify-content: center;
      }
      .newsletter-form {
        flex-direction: column;
        align-items: center;
      }
      .newsletter-form input, .newsletter-form .btn {
        width: 80%;
        max-width: 300px;
      }
    }
    @media (max-width: 550px) {
      .charts-container {
        grid-template-columns: 1fr;
      }
      .chart-card {
        overflow-x: auto;
      }
      .chart-container {
        min-width: 300px;
        height: 220px;
      }
      .data-table {
        font-size: 0.8rem;
      }
      .data-table th, .data-table td {
        padding: 6px 8px;
      }
      .platform-cell span {
        font-size: 0.8rem;
      }
      .platform-icon {
        font-size: 1.1rem;
      }
    }
    @media (max-width: 480px) {
      header {
        padding: 0.8rem;
      }
      .logo-text .text-social,
      .logo-text .text-horizon {
        font-size: 1rem;
      }
      .logo-text .boost-line {
        font-size: 1.3rem;
      }
      .logo-text .boost-line img {
        height: 1.3rem;
      }
      .icon-hamburger {
        font-size: 1.4rem;
      }
      .mobile-menu {
        right: 0.8rem;
        top: 55px;
        min-width: 180px;
      }
      h1 {
        font-size: 1.8rem;
      }
      h2 {
        font-size: 1.4rem;
      }
      p {
        font-size: 0.8rem;
      }
      .stat-card .value {
        font-size: 1.3rem;
      }
      .stat-card .label {
        font-size: 0.8rem;
      }
      .btn-group {
        flex-direction: column;
        gap: 8px;
      }
      .btn {
        width: 90%;
        max-width: 300px;
        text-align: center;
      }
      .footer-bottom {
        flex-direction: column;
        text-align: center;
        gap: 1rem;
        padding: 1rem;
      }
      .footer-bottom p {
        text-align: center;
      }
      .footer-bottom div {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="background-animation"></div>
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-spinner"></div>
    <p>Chargement des données...</p>
  </div>

  <header>
    <a href="dashboard.html" class="logo-text">
      <span class="text-social">SOCIAL</span>
      <div class="boost-line">
        <img src="https://raw.githubusercontent.com/exaucenapopolo/Social-Boost-Horizon-/refs/heads/main/assets/logos/Logo%20social%20Boost%20horizon.jpg" alt="Rocket Icon">
        <span class="text-boost">BOOST</span>
      </div>
      <span class="text-horizon">HORIZON</span>
    </a>
    <i class="fa-solid fa-bars icon-hamburger" id="hamburgerBtn"></i>
    <div class="mobile-menu">
      <a href="dashboard.html"><i class="fa-solid fa-house"></i> Accueil</a>
      <a href="wallet.html"><i class="fa-solid fa-wallet"></i> Mon portefeuille</a>
      <a href="statistiques.html"><i class="fa-solid fa-chart-line"></i> Statistiques</a>
      <a href="commander.html"><i class="fa-solid fa-rocket"></i> Commander</a>
      <a href="commandes.html"><i class="fa-solid fa-list"></i> Mes commandes</a>
      <a href="profil.html"><i class="fa-solid fa-user"></i> Mon profil</a>
      <a href="https://chat.whatsapp.com/HRgJFxTgkiEkEC0Ou2028" target="_blank"><i class="fab fa-whatsapp"></i> Rejoindre WhatsApp</a>
    </div>
  </header>

  <div class="container">
    <h1>Statistiques de Performance</h1>
    <p>Analysez les performances de vos réseaux sociaux et suivez votre croissance</p>
    
    <div class="filters">
      <div class="filter-group">
        <label for="platform">Plateforme</label>
        <select id="platform">
          <option value="all">Toutes les plateformes</option>
          <option value="youtube">YouTube</option>
          <option value="instagram">Instagram</option>
          <option value="tiktok">TikTok</option>
          <option value="facebook">Facebook</option>
          <option value="twitter">Twitter</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label for="period">Période</label>
        <select id="period">
          <option value="7">7 derniers jours</option>
          <option value="30" selected>30 derniers jours</option>
          <option value="90">90 derniers jours</option>
          <option value="365">12 derniers mois</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label for="metric">Métrique</label>
        <select id="metric">
          <option value="followers">Abonnés/Followers</option>
          <option value="views">Vues</option>
          <option value="likes">Likes</option>
          <option value="engagement">Taux d'engagement</option>
          <option value="comments">Commentaires</option>
        </select>
      </div>
    </div>
    
    <div class="stats-cards">
      <div class="stat-card">
        <i class="fas fa-users"></i>
        <div class="value" id="totalFollowers">--</div>
        <div class="label">Abonnés Totaux</div>
        <div class="trend" id="trendFollowers"></div>
      </div>
      
      <div class="stat-card">
        <i class="fas fa-eye"></i>
        <div class="value" id="totalViews">--</div>
        <div class="label">Vues Totales</div>
        <div class="trend" id="trendViews"></div>
      </div>
      
      <div class="stat-card">
        <i class="fas fa-heart"></i>
        <div class="value" id="totalLikes">--</div>
        <div class="label">Likes Totaux</div>
        <div class="trend" id="trendLikes"></div>
      </div>
      
      <div class="stat-card">
        <i class="fas fa-comments"></i>
        <div class="value" id="totalEngagement">--</div>
        <div class="label">Taux d'Engagement</div>
        <div class="trend" id="trendEngagement"></div>
      </div>
    </div>
    
    <div class="charts-container">
      <div class="chart-card">
        <h3 id="chartTitle">Évolution des Abonnés</h3>
        <div class="chart-container">
          <canvas id="mainChart"></canvas>
        </div>
      </div>
      
      <div class="chart-card">
        <h3>Répartition par Plateforme</h3>
        <div class="chart-container">
          <canvas id="platformChart"></canvas>
        </div>
      </div>
    </div>
    
    <h2 style="text-align: left; margin-bottom: 15px;">Performances Détaillées</h2>
    <div style="overflow-x: auto;">
      <table class="data-table" id="dataTable">
        <thead>
          <tr>
            <th>Plateforme</th>
            <th>Abonnés</th>
            <th>Vues</th>
            <th>Likes</th>
            <th>Commentaires</th>
            <th>Engagement</th>
            <th>Évolution</th>
          </tr>
        </thead>
        <tbody>
          </tbody>
      </table>
    </div>
    
    <div class="btn-group">
      <button class="btn btn-export" id="exportPdfBtn">
        <i class="fas fa-file-export"></i> Exporter en PDF
      </button>
      <button class="btn btn-export" id="exportCsvBtn">
        <i class="fas fa-file-csv"></i> Exporter en CSV
      </button>
      <button class="btn" id="refreshDataBtn">
        <i class="fas fa-sync-alt"></i> Actualiser les données
      </button>
    </div>
  </div>

  <footer id="contact">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <div class="footer-logo">
            <span class="text-social">SOCIAL</span>
            <div class="boost-line">
              <img src="https://raw.githubusercontent.com/exaucenapopolo/Social-Boost-Horizon-/refs/heads/main/assets/logos/Logo%20social%20Boost%20horizon.jpg" alt="Rocket Icon">
              <span class="text-boost">BOOST</span>
            </div>
            <span class="text-horizon">HORIZON</span>
          </div>
          <div class="footer-about">
            <p>Social Boost Horizon est votre partenaire pour développer votre présence sur les réseaux sociaux. Nous offrons des solutions innovantes et fiables pour booster votre audience et votre engagement.</p>
            <div class="social-icons">
              <a href="https://www.facebook.com/share/1ACQ14Cg9h/?mibextid=wwXIfr" target="_blank" aria-label="Facebook"><i class="fa-brands fa-facebook-f"></i></a>
              <a href="https://www.instagram.com/social.boost.hori?igsh=MXJvZ2h2azQ0NjhicA%3D%3D&utm_source=qr" target="_blank" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
              <a href="https://x.com/mcexau?s=21" target="_blank" aria-label="Twitter"><i class="fa-brands fa-twitter"></i></a>
              <a href="https://www.tiktok.com/@social.boost.hori?_t=ZN-8x1AOi6jZP4&_r=1" target="_blank" aria-label="TikTok"><i class="fa-brands fa-tiktok"></i></a>
              <a href="http://www.youtube.com/@SocialBoostHorizon-d7t" target="_blank" aria-label="YouTube"><i class="fa-brands fa-youtube"></i></a>
            </div>
          </div>
        </div>
        
        <div class="footer-section footer-links">
          <h3>Liens Rapides</h3>
          <ul>
            <li><a href="dashboard.html"><i class="fa-solid fa-chevron-right"></i> Accueil</a></li>
            <li><a href="services.html"><i class="fa-solid fa-chevron-right"></i> Services</a></li>
            <li><a href="statistiques.html"><i class="fa-solid fa-chevron-right"></i> Statistiques</a></li>
            <li><a href="commandes.html"><i class="fa-solid fa-chevron-right"></i> Mes commandes</a></li>
            <li><a href="profil.html"><i class="fa-solid fa-chevron-right"></i> Mon profil</a></li>
            <li><a href="https://chat.whatsapp.com/HRgJFxTgkiEkEC0Ou2028" target="_blank"><i class="fa-solid fa-chevron-right"></i> Rejoindre WhatsApp</a></li>
          </ul>
        </div>
        
        <div class="footer-section footer-contact">
          <h3>Contactez-nous</h3>
          <p><i class="fa-solid fa-envelope"></i> socialboosthorizon984@gmail.com</p>
          <p><i class="fa-solid fa-phone"></i> +237 699 85 36 65</p>
          <p><i class="fa-solid fa-location-dot"></i> Douala, Cameroun</p>
          <p><i class="fa-solid fa-clock"></i> Support 24/7</p>
          <a href="https://chat.whatsapp.com/HRgJFxTgkiEkEC0Ou2028" target="_blank" class="btn btn-whatsapp" style="margin-top: 15px;">
            <i class="fab fa-whatsapp"></i> Rejoindre notre groupe
          </a>
        </div>
        
        <div class="footer-section footer-newsletter">
          <h3>Newsletter</h3>
          <p>Inscrivez-vous pour recevoir nos dernières offres et astuces pour booster vos réseaux sociaux.</p>
          <form class="newsletter-form" id="newsletterForm">
            <input type="email" placeholder="Votre adresse email" required>
            <button type="submit" class="btn">S'abonner</button>
          </form>
          <p id="newsletterMessage" style="display: none; text-align: center; margin-top: 10px; color: var(--sbh-success-green);"></p>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p>© 2025 Social Boost Horizon. Tous droits réservés.</p>
        <div>
          <a href="legal.html">Mentions légales</a>
          <a href="terms.html">CGV</a>
          <a href="privacy.html">Confidentialité</a>
          <a href="cookies.html">Cookies</a>
        </div>
        <button id="logoutBtn">Déconnexion</button>
        <div class="payment-methods">
          <i class="fa-brands fa-cc-visa"></i>
          <i class="fa-brands fa-cc-mastercard"></i>
          <i class="fa-brands fa-cc-paypal"></i>
          <i class="fa-solid fa-money-bill-wave"></i>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // =======================================================
    // JAVASCRIPT LOGIC
    // =======================================================
    document.addEventListener("DOMContentLoaded", function () {
      // --- DOM Elements ---
      const header = document.querySelector("header");
      const hamburger = document.getElementById("hamburgerBtn");
      const platformSelect = document.getElementById('platform');
      const periodSelect = document.getElementById('period');
      const metricSelect = document.getElementById('metric');
      const totalFollowersEl = document.getElementById('totalFollowers');
      const totalViewsEl = document.getElementById('totalViews');
      const totalLikesEl = document.getElementById('totalLikes');
      const totalEngagementEl = document.getElementById('totalEngagement');
      const trendFollowersEl = document.getElementById('trendFollowers');
      const trendViewsEl = document.getElementById('trendViews');
      const trendLikesEl = document.getElementById('trendLikes');
      const trendEngagementEl = document.getElementById('trendEngagement');
      const chartTitleEl = document.getElementById('chartTitle');
      const dataTableBody = document.querySelector('#dataTable tbody');
      const newsletterForm = document.getElementById("newsletterForm");
      const newsletterMessage = document.getElementById("newsletterMessage");
      const logoutBtn = document.getElementById('logoutBtn');
      const refreshDataBtn = document.getElementById('refreshDataBtn');
      const exportPdfBtn = document.getElementById('exportPdfBtn');
      const exportCsvBtn = document.getElementById('exportCsvBtn');
      const loadingOverlay = document.getElementById('loadingOverlay');

      let mainChartInstance; // Pour stocker l'instance du graphique principal
      let platformChartInstance; // Pour stocker l'instance du graphique de répartition

      // --- Simulated Data (More complex for better filtering) ---
      // This data structure allows for filtering by platform, period, and metric.
      // In a real application, this would come from a server API.
      const rawData = [
        // Data for 30 days
        { date: '2025-05-06', youtube: { followers: 120, views: 5000, likes: 800, comments: 50, engagement: 4.5 }, instagram: { followers: 80, views: 2000, likes: 400, comments: 30, engagement: 3.8 }, tiktok: { followers: 150, views: 7000, likes: 1200, comments: 70, engagement: 5.2 }, facebook: { followers: 40, views: 1000, likes: 150, comments: 10, engagement: 2.5 }, twitter: { followers: 60, views: 1500, likes: 200, comments: 15, engagement: 3.0 } },
        { date: '2025-05-07', youtube: { followers: 125, views: 5200, likes: 820, comments: 52, engagement: 4.6 }, instagram: { followers: 82, views: 2100, likes: 410, comments: 31, engagement: 3.9 }, tiktok: { followers: 155, views: 7200, likes: 1230, comments: 72, engagement: 5.3 }, facebook: { followers: 41, views: 1020, likes: 155, comments: 11, engagement: 2.6 }, twitter: { followers: 61, views: 1520, likes: 205, comments: 16, engagement: 3.1 } },
        { date: '2025-05-08', youtube: { followers: 130, views: 5400, likes: 840, comments: 54, engagement: 4.7 }, instagram: { followers: 84, views: 2200, likes: 420, comments: 32, engagement: 4.0 }, tiktok: { followers: 160, views: 7400, likes: 1260, comments: 74, engagement: 5.4 }, facebook: { followers: 42, views: 1040, likes: 160, comments: 12, engagement: 2.7 }, twitter: { followers: 62, views: 1540, likes: 210, comments: 17, engagement: 3.2 } },
        { date: '2025-05-09', youtube: { followers: 135, views: 5600, likes: 860, comments: 56, engagement: 4.8 }, instagram: { followers: 86, views: 2300, likes: 430, comments: 33, engagement: 4.1 }, tiktok: { followers: 165, views: 7600, likes: 1290, comments: 76, engagement: 5.5 }, facebook: { followers: 43, views: 1060, likes: 165, comments: 13, engagement: 2.8 }, twitter: { followers: 63, views: 1560, likes: 215, comments: 18, engagement: 3.3 } },
        { date: '2025-05-10', youtube: { followers: 140, views: 5800, likes: 880, comments: 58, engagement: 4.9 }, instagram: { followers: 88, views: 2400, likes: 440, comments: 34, engagement: 4.2 }, tiktok: { followers: 170, views: 7800, likes: 1320, comments: 78, engagement: 5.6 }, facebook: { followers: 44, views: 1080, likes: 170, comments: 14, engagement: 2.9 }, twitter: { followers: 64, views: 1580, likes: 220, comments: 19, engagement: 3.4 } },
        { date: '2025-05-11', youtube: { followers: 145, views: 6000, likes: 900, comments: 60, engagement: 5.0 }, instagram: { followers: 90, views: 2500, likes: 450, comments: 35, engagement: 4.3 }, tiktok: { followers: 175, views: 8000, likes: 1350, comments: 80, engagement: 5.7 }, facebook: { followers: 45, views: 1100, likes: 175, comments: 15, engagement: 3.0 }, twitter: { followers: 65, views: 1600, likes: 225, comments: 20, engagement: 3.5 } },
        { date: '2025-05-12', youtube: { followers: 150, views: 6200, likes: 920, comments: 62, engagement: 5.1 }, instagram: { followers: 92, views: 2600, likes: 460, comments: 36, engagement: 4.4 }, tiktok: { followers: 180, views: 8200, likes: 1380, comments: 82, engagement: 5.8 }, facebook: { followers: 46, views: 1120, likes: 180, comments: 16, engagement: 3.1 }, twitter: { followers: 66, views: 1620, likes: 230, comments: 21, engagement: 3.6 } },
        { date: '2025-05-13', youtube: { followers: 155, views: 6400, likes: 940, comments: 64, engagement: 5.2 }, instagram: { followers: 94, views: 2700, likes: 470, comments: 37, engagement: 4.5 }, tiktok: { followers: 185, views: 8400, likes: 1410, comments: 84, engagement: 5.9 }, facebook: { followers: 47, views: 1140, likes: 185, comments: 17, engagement: 3.2 }, twitter: { followers: 67, views: 1640, likes: 235, comments: 22, engagement: 3.7 } },
        { date: '2025-05-14', youtube: { followers: 160, views: 6600, likes: 960, comments: 66, engagement: 5.3 }, instagram: { followers: 96, views: 2800, likes: 480, comments: 38, engagement: 4.6 }, tiktok: { followers: 190, views: 8600, likes: 1440, comments: 86, engagement: 6.0 }, facebook: { followers: 48, views: 1160, likes: 190, comments: 18, engagement: 3.3 }, twitter: { followers: 68, views: 1660, likes: 240, comments: 23, engagement: 3.8 } },
        { date: '2025-05-15', youtube: { followers: 165, views: 6800, likes: 980, comments: 68, engagement: 5.4 }, instagram: { followers: 98, views: 2900, likes: 490, comments: 39, engagement: 4.7 }, tiktok: { followers: 195, views: 8800, likes: 1470, comments: 88, engagement: 6.1 }, facebook: { followers: 49, views: 1180, likes: 195, comments: 19, engagement: 3.4 }, twitter: { followers: 69, views: 1680, likes: 245, comments: 24, engagement: 3.9 } },
        { date: '2025-05-16', youtube: { followers: 170, views: 7000, likes: 1000, comments: 70, engagement: 5.5 }, instagram: { followers: 100, views: 3000, likes: 500, comments: 40, engagement: 4.8 }, tiktok: { followers: 200, views: 9000, likes: 1500, comments: 90, engagement: 6.2 }, facebook: { followers: 50, views: 1200, likes: 200, comments: 20, engagement: 3.5 }, twitter: { followers: 70, views: 1700, likes: 250, comments: 25, engagement: 4.0 } },
        { date: '2025-05-17', youtube: { followers: 175, views: 7200, likes: 1020, comments: 72, engagement: 5.6 }, instagram: { followers: 102, views: 3100, likes: 510, comments: 41, engagement: 4.9 }, tiktok: { followers: 205, views: 9200, likes: 1530, comments: 92, engagement: 6.3 }, facebook: { followers: 51, views: 1220, likes: 205, comments: 21, engagement: 3.6 }, twitter: { followers: 71, views: 1720, likes: 255, comments: 26, engagement: 4.1 } },
        { date: '2025-05-18', youtube: { followers: 180, views: 7400, likes: 1040, comments: 74, engagement: 5.7 }, instagram: { followers: 104, views: 3200, likes: 520, comments: 42, engagement: 5.0 }, tiktok: { followers: 210, views: 9400, likes: 1560, comments: 94, engagement: 6.4 }, facebook: { followers: 52, views: 1240, likes: 210, comments: 22, engagement: 3.7 }, twitter: { followers: 72, views: 1740, likes: 260, comments: 27, engagement: 4.2 } },
        { date: '2025-05-19', youtube: { followers: 185, views: 7600, likes: 1060, comments: 76, engagement: 5.8 }, instagram: { followers: 106, views: 3300, likes: 530, comments: 43, engagement: 5.1 }, tiktok: { followers: 215, views: 9600, likes: 1590, comments: 96, engagement: 6.5 }, facebook: { followers: 53, views: 1260, likes: 215, comments: 23, engagement: 3.8 }, twitter: { followers: 73, views: 1760, likes: 265, comments: 28, engagement: 4.3 } },
        { date: '2025-05-20', youtube: { followers: 190, views: 7800, likes: 1080, comments: 78, engagement: 5.9 }, instagram: { followers: 108, views: 3400, likes: 540, comments: 44, engagement: 5.2 }, tiktok: { followers: 220, views: 9800, likes: 1620, comments: 98, engagement: 6.6 }, facebook: { followers: 54, views: 1280, likes: 220, comments: 24, engagement: 3.9 }, twitter: { followers: 74, views: 1780, likes: 270, comments: 29, engagement: 4.4 } },
        { date: '2025-05-21', youtube: { followers: 195, views: 8000, likes: 1100, comments: 80, engagement: 6.0 }, instagram: { followers: 110, views: 3500, likes: 550, comments: 45, engagement: 5.3 }, tiktok: { followers: 225, views: 10000, likes: 1650, comments: 100, engagement: 6.7 }, facebook: { followers: 55, views: 1300, likes: 225, comments: 25, engagement: 4.0 }, twitter: { followers: 75, views: 1800, likes: 275, comments: 30, engagement: 4.5 } },
        { date: '2025-05-22', youtube: { followers: 200, views: 8200, likes: 1120, comments: 82, engagement: 6.1 }, instagram: { followers: 112, views: 3600, likes: 560, comments: 46, engagement: 5.4 }, tiktok: { followers: 230, views: 10200, likes: 1680, comments: 102, engagement: 6.8 }, facebook: { followers: 56, views: 1320, likes: 230, comments: 26, engagement: 4.1 }, twitter: { followers: 76, views: 1820, likes: 280, comments: 31, engagement: 4.6 } },
        { date: '2025-05-23', youtube: { followers: 205, views: 8400, likes: 1140, comments: 84, engagement: 6.2 }, instagram: { followers: 114, views: 3700, likes: 570, comments: 47, engagement: 5.5 }, tiktok: { followers: 235, views: 10400, likes: 1710, comments: 104, engagement: 6.9 }, facebook: { followers: 57, views: 1340, likes: 235, comments: 27, engagement: 4.2 }, twitter: { followers: 77, views: 1840, likes: 285, comments: 32, engagement: 4.7 } },
        { date: '2025-05-24', youtube: { followers: 210, views: 8600, likes: 1160, comments: 86, engagement: 6.3 }, instagram: { followers: 116, views: 3800, likes: 580, comments: 48, engagement: 5.6 }, tiktok: { followers: 240, views: 10600, likes: 1740, comments: 106, engagement: 7.0 }, facebook: { followers: 58, views: 1360, likes: 240, comments: 28, engagement: 4.3 }, twitter: { followers: 78, views: 1860, likes: 290, comments: 33, engagement: 4.8 } },
        { date: '2025-05-25', youtube: { followers: 215, views: 8800, likes: 1180, comments: 88, engagement: 6.4 }, instagram: { followers: 118, views: 3900, likes: 590, comments: 49, engagement: 5.7 }, tiktok: { followers: 245, views: 10800, likes: 1770, comments: 108, engagement: 7.1 }, facebook: { followers: 59, views: 1380, likes: 245, comments: 29, engagement: 4.4 }, twitter: { followers: 79, views: 1880, likes: 295, comments: 34, engagement: 4.9 } },
        { date: '2025-05-26', youtube: { followers: 220, views: 9000, likes: 1200, comments: 90, engagement: 6.5 }, instagram: { followers: 120, views: 4000, likes: 600, comments: 50, engagement: 5.8 }, tiktok: { followers: 250, views: 11000, likes: 1800, comments: 110, engagement: 7.2 }, facebook: { followers: 60, views: 1400, likes: 250, comments: 30, engagement: 4.5 }, twitter: { followers: 80, views: 1900, likes: 300, comments: 35, engagement: 5.0 } },
        { date: '2025-05-27', youtube: { followers: 225, views: 9200, likes: 1220, comments: 92, engagement: 6.6 }, instagram: { followers: 122, views: 4100, likes: 610, comments: 51, engagement: 5.9 }, tiktok: { followers: 255, views: 11200, likes: 1830, comments: 112, engagement: 7.3 }, facebook: { followers: 61, views: 1420, likes: 255, comments: 31, engagement: 4.6 }, twitter: { followers: 81, views: 1920, likes: 305, comments: 36, engagement: 5.1 } },
        { date: '2025-05-28', youtube: { followers: 230, views: 9400, likes: 1240, comments: 94, engagement: 6.7 }, instagram: { followers: 124, views: 4200, likes: 620, comments: 52, engagement: 6.0 }, tiktok: { followers: 260, views: 11400, likes: 1860, comments: 114, engagement: 7.4 }, facebook: { followers: 62, views: 1440, likes: 260, comments: 32, engagement: 4.7 }, twitter: { followers: 82, views: 1940, likes: 310, comments: 37, engagement: 5.2 } },
        { date: '2025-05-29', youtube: { followers: 235, views: 9600, likes: 1260, comments: 96, engagement: 6.8 }, instagram: { followers: 126, views: 4300, likes: 630, comments: 53, engagement: 6.1 }, tiktok: { followers: 265, views: 11600, likes: 1890, comments: 116, engagement: 7.5 }, facebook: { followers: 63, views: 1460, likes: 265, comments: 33, engagement: 4.8 }, twitter: { followers: 83, views: 1960, likes: 315, comments: 38, engagement: 5.3 } },
        { date: '2025-05-30', youtube: { followers: 240, views: 9800, likes: 1280, comments: 98, engagement: 6.9 }, instagram: { followers: 128, views: 4400, likes: 640, comments: 54, engagement: 6.2 }, tiktok: { followers: 270, views: 11800, likes: 1920, comments: 118, engagement: 7.6 }, facebook: { followers: 64, views: 1480, likes: 270, comments: 34, engagement: 4.9 }, twitter: { followers: 84, views: 1980, likes: 320, comments: 39, engagement: 5.4 } },
        { date: '2025-05-31', youtube: { followers: 245, views: 10000, likes: 1300, comments: 100, engagement: 7.0 }, instagram: { followers: 130, views: 4500, likes: 650, comments: 55, engagement: 6.3 }, tiktok: { followers: 275, views: 12000, likes: 1950, comments: 120, engagement: 7.7 }, facebook: { followers: 65, views: 1500, likes: 275, comments: 35, engagement: 5.0 }, twitter: { followers: 85, views: 2000, likes: 325, comments: 40, engagement: 5.5 } },
        { date: '2025-06-01', youtube: { followers: 250, views: 10200, likes: 1320, comments: 102, engagement: 7.1 }, instagram: { followers: 132, views: 4600, likes: 660, comments: 56, engagement: 6.4 }, tiktok: { followers: 280, views: 12200, likes: 1980, comments: 122, engagement: 7.8 }, facebook: { followers: 66, views: 1520, likes: 280, comments: 36, engagement: 5.1 }, twitter: { followers: 86, views: 2020, likes: 330, comments: 41, engagement: 5.6 } },
        { date: '2025-06-02', youtube: { followers: 255, views: 10400, likes: 1340, comments: 104, engagement: 7.2 }, instagram: { followers: 134, views: 4700, likes: 670, comments: 57, engagement: 6.5 }, tiktok: { followers: 285, views: 12400, likes: 2010, comments: 124, engagement: 7.9 }, facebook: { followers: 67, views: 1540, likes: 285, comments: 37, engagement: 5.2 }, twitter: { followers: 87, views: 2040, likes: 335, comments: 42, engagement: 5.7 } },
        { date: '2025-06-03', youtube: { followers: 260, views: 10600, likes: 1360, comments: 106, engagement: 7.3 }, instagram: { followers: 136, views: 4800, likes: 680, comments: 58, engagement: 6.6 }, tiktok: { followers: 290, views: 12600, likes: 2040, comments: 126, engagement: 8.0 }, facebook: { followers: 68, views: 1560, likes: 290, comments: 38, engagement: 5.3 }, twitter: { followers: 88, views: 2060, likes: 340, comments: 43, engagement: 5.8 } },
        { date: '2025-06-04', youtube: { followers: 265, views: 10800, likes: 1380, comments: 108, engagement: 7.4 }, instagram: { followers: 138, views: 4900, likes: 690, comments: 59, engagement: 6.7 }, tiktok: { followers: 295, views: 12800, likes: 2070, comments: 128, engagement: 8.1 }, facebook: { followers: 69, views: 1580, likes: 295, comments: 39, engagement: 5.4 }, twitter: { followers: 89, views: 2080, likes: 345, comments: 44, engagement: 5.9 } },
        { date: '2025-06-05', youtube: { followers: 270, views: 11000, likes: 1400, comments: 110, engagement: 7.5 }, instagram: { followers: 140, views: 5000, likes: 700, comments: 60, engagement: 6.8 }, tiktok: { followers: 300, views: 13000, likes: 2100, comments: 130, engagement: 8.2 }, facebook: { followers: 70, views: 1600, likes: 300, comments: 40, engagement: 5.5 }, twitter: { followers: 90, views: 2100, likes: 350, comments: 45, engagement: 6.0 } },
        { date: '2025-06-06', youtube: { followers: 275, views: 11200, likes: 1420, comments: 112, engagement: 7.6 }, instagram: { followers: 142, views: 5100, likes: 710, comments: 61, engagement: 6.9 }, tiktok: { followers: 305, views: 13200, likes: 2130, comments: 132, engagement: 8.3 }, facebook: { followers: 71, views: 1620, likes: 305, comments: 41, engagement: 5.6 }, twitter: { followers: 91, views: 2120, likes: 355, comments: 46, engagement: 6.1 } },
        { date: '2025-06-07', youtube: { followers: 280, views: 11400, likes: 1440, comments: 114, engagement: 7.7 }, instagram: { followers: 144, views: 5200, likes: 720, comments: 62, engagement: 7.0 }, tiktok: { followers: 310, views: 13400, likes: 2160, comments: 134, engagement: 8.4 }, facebook: { followers: 72, views: 1640, likes: 310, comments: 42, engagement: 5.7 }, twitter: { followers: 92, views: 2140, likes: 360, comments: 47, engagement: 6.2 } },
        { date: '2025-06-08', youtube: { followers: 285, views: 11600, likes: 1460, comments: 116, engagement: 7.8 }, instagram: { followers: 146, views: 5300, likes: 730, comments: 63, engagement: 7.1 }, tiktok: { followers: 315, views: 13600, likes: 2190, comments: 136, engagement: 8.5 }, facebook: { followers: 73, views: 1660, likes: 315, comments: 43, engagement: 5.8 }, twitter: { followers: 93, views: 2160, likes: 365, comments: 48, engagement: 6.3 } },
      ];

      // --- Helper Functions ---

      /**
       * Formatte un nombre avec un séparateur de milliers.
       * @param {number} num - Le nombre à formater.
       * @returns {string} Le nombre formaté.
       */
      function formatNumber(num) {
        return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
      }

      /**
       * Calcule la date de début en fonction de la période sélectionnée.
       * @param {number} days - Nombre de jours dans le passé.
       * @returns {Date} La date de début.
       */
      function getStartDate(days) {
          const d = new Date();
          d.setDate(d.getDate() - (days - 1)); // -1 pour inclure le jour actuel
          return d;
      }

      /**
       * Filtre les données brutes en fonction de la période sélectionnée.
       * @param {Array} data - Les données brutes.
       * @param {string} period - La période ('7', '30', '90', '365').
       * @returns {Array} Les données filtrées.
       */
      function filterDataByPeriod(data, period) {
          const numDays = parseInt(period);
          if (isNaN(numDays)) return data; // Retourne toutes les données si la période n'est pas valide
          
          const startDate = getStartDate(numDays);
          
          return data.filter(item => {
              const itemDate = new Date(item.date);
              // Compare en ignorant l'heure, juste la date
              return itemDate >= startDate;
          });
      }


      /**
       * Met à jour les cartes de statistiques en fonction des données filtrées.
       * @param {Array} filteredData - Les données filtrées.
       * @param {string} selectedPlatform - La plateforme sélectionnée.
       */
      function updateStatCards(filteredData, selectedPlatform) {
          let totalFollowers = 0;
          let totalViews = 0;
          let totalLikes = 0;
          let totalComments = 0;
          let totalEngagement = 0;
          let engagementCount = 0;

          // Calculer les totaux pour la période et la plateforme actuelle
          filteredData.forEach(dayData => {
              for (const platform in dayData) {
                  if (platform === 'date') continue;
                  if (selectedPlatform === 'all' || selectedPlatform === platform) {
                      totalFollowers += dayData[platform].followers || 0;
                      totalViews += dayData[platform].views || 0;
                      totalLikes += dayData[platform].likes || 0;
                      totalComments += dayData[platform].comments || 0;
                      if (dayData[platform].engagement) {
                          totalEngagement += dayData[platform].engagement;
                          engagementCount++;
                      }
                  }
              }
          });

          // Pour la tendance, nous avons besoin de la somme de la période précédente.
          // C'est une simplification, en réalité, il faudrait récupérer les données de la période précédente.
          // Ici, nous allons simuler une évolution.
          const currentTotalFollowers = totalFollowers;
          const prevTotalFollowers = currentTotalFollowers * (1 - (Math.random() * 0.05 - 0.025)); // +/- 2.5%
          const followersTrend = ((currentTotalFollowers - prevTotalFollowers) / prevTotalFollowers) * 100;

          const currentTotalViews = totalViews;
          const prevTotalViews = currentTotalViews * (1 - (Math.random() * 0.04 - 0.02)); // +/- 2%
          const viewsTrend = ((currentTotalViews - prevTotalViews) / prevTotalViews) * 100;
          
          const currentTotalLikes = totalLikes;
          const prevTotalLikes = currentTotalLikes * (1 - (Math.random() * 0.03 - 0.015)); // +/- 1.5%
          const likesTrend = ((currentTotalLikes - prevTotalLikes) / prevTotalLikes) * 100;

          const currentAvgEngagement = engagementCount > 0 ? (totalEngagement / engagementCount) : 0;
          const prevAvgEngagement = currentAvgEngagement * (1 - (Math.random() * 0.02 - 0.01)); // +/- 1%
          const engagementTrend = ((currentAvgEngagement - prevAvgEngagement) / prevAvgEngagement) * 100;


          totalFollowersEl.textContent = formatNumber(currentTotalFollowers);
          totalViewsEl.textContent = formatNumber(currentTotalViews);
          totalLikesEl.textContent = formatNumber(currentTotalLikes);
          totalEngagementEl.textContent = `${currentAvgEngagement.toFixed(1)}%`;

          updateTrendDisplay(trendFollowersEl, followersTrend);
          updateTrendDisplay(trendViewsEl, viewsTrend);
          updateTrendDisplay(trendLikesEl, likesTrend);
          updateTrendDisplay(trendEngagementEl, engagementTrend);
      }

      /**
       * Met à jour l'affichage de la tendance (flèche et pourcentage).
       * @param {HTMLElement} element - L'élément HTML de la tendance.
       * @param {number} trendValue - La valeur de la tendance (en pourcentage).
       */
      function updateTrendDisplay(element, trendValue) {
          element.innerHTML = ''; // Clear previous content
          element.classList.remove('up', 'down');

          const icon = document.createElement('i');
          const span = document.createElement('span');

          if (trendValue > 0) {
              icon.classList.add('fas', 'fa-arrow-up');
              element.classList.add('up');
              span.textContent = `${trendValue.toFixed(1)}% ce mois`;
          } else if (trendValue < 0) {
              icon.classList.add('fas', 'fa-arrow-down');
              element.classList.add('down');
              span.textContent = `${Math.abs(trendValue).toFixed(1)}% ce mois`;
          } else {
              icon.classList.add('fas', 'fa-minus'); // Neutral trend
              span.textContent = `0.0% ce mois`;
          }
          element.appendChild(icon);
          element.appendChild(span);
      }


      /**
       * Met à jour le graphique principal (évolution).
       * @param {Array} filteredData - Les données filtrées.
       * @param {string} selectedPlatform - La plateforme sélectionnée.
       * @param {string} selectedMetric - La métrique sélectionnée.
       */
      function updateMainChart(filteredData, selectedPlatform, selectedMetric) {
        if (mainChartInstance) {
          mainChartInstance.destroy(); // Détruit l'ancienne instance pour éviter les problèmes
        }

        const labels = filteredData.map(d => {
            const date = new Date(d.date);
            return `${date.getDate()} ${date.toLocaleString('fr-FR', { month: 'short' })}`;
        });
        
        let dataValues = [];
        let metricLabel = '';
        let metricColor = '#1E90FF'; // Default color

        switch (selectedMetric) {
            case 'followers':
                metricLabel = 'Abonnés';
                metricColor = '#1E90FF'; // Bleu
                if (selectedPlatform === 'all') {
                  dataValues = filteredData.map(d => Object.keys(d).filter(k => k !== 'date').reduce((sum, p) => sum + d[p].followers, 0));
                } else {
                  dataValues = filteredData.map(d => d[selectedPlatform].followers);
                }
                break;
            case 'views':
                metricLabel = 'Vues';
                metricColor = '#4CAF50'; // Vert
                 if (selectedPlatform === 'all') {
                  dataValues = filteredData.map(d => Object.keys(d).filter(k => k !== 'date').reduce((sum, p) => sum + d[p].views, 0));
                } else {
                  dataValues = filteredData.map(d => d[selectedPlatform].views);
                }
                break;
            case 'likes':
                metricLabel = 'Likes';
                metricColor = '#FF6B6B'; // Rouge
                 if (selectedPlatform === 'all') {
                  dataValues = filteredData.map(d => Object.keys(d).filter(k => k !== 'date').reduce((sum, p) => sum + d[p].likes, 0));
                } else {
                  dataValues = filteredData.map(d => d[selectedPlatform].likes);
                }
                break;
            case 'comments':
                metricLabel = 'Commentaires';
                metricColor = '#FFA500'; // Orange
                 if (selectedPlatform === 'all') {
                  dataValues = filteredData.map(d => Object.keys(d).filter(k => k !== 'date').reduce((sum, p) => sum + d[p].comments, 0));
                } else {
                  dataValues = filteredData.map(d => d[selectedPlatform].comments);
                }
                break;
            case 'engagement':
                metricLabel = 'Taux d\'engagement';
                metricColor = '#9370DB'; // Violet
                 if (selectedPlatform === 'all') {
                    // Calcul de la moyenne d'engagement sur toutes les plateformes pour chaque jour
                    dataValues = filteredData.map(d => {
                        let dailyEngagementSum = 0;
                        let dailyEngagementCount = 0;
                        for (const p in d) {
                            if (p !== 'date' && d[p].engagement) {
                                dailyEngagementSum += d[p].engagement;
                                dailyEngagementCount++;
                            }
                        }
                        return dailyEngagementCount > 0 ? (dailyEngagementSum / dailyEngagementCount) : 0;
                    });
                } else {
                    dataValues = filteredData.map(d => d[selectedPlatform].engagement);
                }
                break;
        }

        chartTitleEl.textContent = `Évolution des ${metricLabel}`;

        const ctx = document.getElementById('mainChart').getContext('2d');
        mainChartInstance = new Chart(ctx, {
          type: 'line',
          data: {
            labels: labels,
            datasets: [{
              label: metricLabel,
              data: dataValues,
              borderColor: metricColor,
              backgroundColor: `${metricColor}1A`, // 10% opacity
              borderWidth: 3,
              pointBackgroundColor: metricColor,
              pointRadius: 4,
              fill: true,
              tension: 0.4 // Plus fluide
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                labels: {
                  color: '#fff',
                  font: {
                    size: 12
                  }
                }
              },
              tooltip: {
                callbacks: {
                  label: function(context) {
                    let label = context.dataset.label || '';
                    if (label) {
                        label += ': ';
                    }
                    if (context.parsed.y !== null) {
                        label += selectedMetric === 'engagement' ? `${context.parsed.y.toFixed(2)}%` : formatNumber(context.parsed.y);
                    }
                    return label;
                  }
                }
              }
            },
            scales: {
              y: {
                beginAtZero: true,
                grid: {
                  color: 'rgba(255, 255, 255, 0.1)'
                },
                ticks: {
                  color: 'rgba(255, 255, 255, 0.7)',
                  font: {
                    size: 11
                  },
                   callback: function(value) {
                       return selectedMetric === 'engagement' ? `${value}%` : formatNumber(value);
                   }
                }
              },
              x: {
                grid: {
                  color: 'rgba(255, 255, 255, 0.1)'
                },
                ticks: {
                  color: 'rgba(255, 255, 255, 0.7)',
                  font: {
                    size: 11
                  }
                }
              }
            }
          }
        });
      }

      /**
       * Met à jour le graphique de répartition par plateforme.
       * @param {Array} filteredData - Les données filtrées.
       */
      function updatePlatformChart(filteredData) {
        if (platformChartInstance) {
          platformChartInstance.destroy(); // Détruit l'ancienne instance
        }

        const platformTotals = {
            youtube: { followers: 0, views: 0, likes: 0, comments: 0, engagement: 0, count: 0 },
            instagram: { followers: 0, views: 0, likes: 0, comments: 0, engagement: 0, count: 0 },
            tiktok: { followers: 0, views: 0, likes: 0, comments: 0, engagement: 0, count: 0 },
            facebook: { followers: 0, views: 0, likes: 0, comments: 0, engagement: 0, count: 0 },
            twitter: { followers: 0, views: 0, likes: 0, comments: 0, engagement: 0, count: 0 }
        };

        // Calcul des totaux pour chaque plateforme sur la période filtrée
        filteredData.forEach(dayData => {
            for (const platform in platformTotals) {
                if (dayData[platform]) {
                    platformTotals[platform].followers += dayData[platform].followers || 0;
                    platformTotals[platform].views += dayData[platform].views || 0;
                    platformTotals[platform].likes += dayData[platform].likes || 0;
                    platformTotals[platform].comments += dayData[platform].comments || 0;
                    if (dayData[platform].engagement) {
                        platformTotals[platform].engagement += dayData[platform].engagement;
                        platformTotals[platform].count++;
                    }
                }
            }
        });

        // Utilisons les followers comme métrique de répartition pour le donut chart
        // Vous pouvez changer cela pour 'views' ou 'likes' si vous préférez
        const dataForChart = [
          platformTotals.youtube.followers,
          platformTotals.instagram.followers,
          platformTotals.tiktok.followers,
          platformTotals.facebook.followers,
          platformTotals.twitter.followers
        ];

        const ctx = document.getElementById('platformChart').getContext('2d');
        platformChartInstance = new Chart(ctx, {
          type: 'doughnut',
          data: {
            labels: ['YouTube', 'Instagram', 'TikTok', 'Facebook', 'Twitter'],
            datasets: [{
              data: dataForChart,
              backgroundColor: [
                '#FF0000', // YouTube
                '#E1306C', // Instagram
                '#000000', // TikTok (ou '#69C9D0' pour le bleu cyan)
                '#1877F2', // Facebook
                '#1DA1F2'  // Twitter
              ],
              borderWidth: 0
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'right',
                labels: {
                  color: '#fff',
                  font: {
                    size: 12
                  }
                }
              },
              tooltip: {
                callbacks: {
                  label: function(context) {
                    let label = context.label || '';
                    if (label) {
                        label += ': ';
                    }
                    if (context.parsed !== null) {
                        label += formatNumber(context.parsed);
                    }
                    return label;
                  }
                }
              }
            }
          }
        });
      }


      /**
       * Met à jour le tableau de données.
       * @param {Array} filteredData - Les données filtrées.
       * @param {string} selectedPeriod - La période sélectionnée.
       */
      function updateDataTable(filteredData, selectedPeriod) {
        // Obtenir le premier jour de la période et le dernier jour de la période
        const startDate = new Date(filteredData[0]?.date);
        const endDate = new Date(filteredData[filteredData.length - 1]?.date);

        // Affiche uniquement la dernière entrée pour chaque plateforme
        // Car le tableau détaillé est censé montrer les "performances actuelles" à la fin de la période.
        // Si vous voulez un tableau journalier, la logique serait différente.

        // Initialisation des données des plateformes avec 0 pour les métriques
        const platformData = {
          youtube: { followers: 0, views: 0, likes: 0, comments: 0, engagement: 0, count: 0 },
          instagram: { followers: 0, views: 0, likes: 0, comments: 0, engagement: 0, count: 0 },
          tiktok: { followers: 0, views: 0, likes: 0, comments: 0, engagement: 0, count: 0 },
          facebook: { followers: 0, views: 0, likes: 0, comments: 0, engagement: 0, count: 0 },
          twitter: { followers: 0, views: 0, likes: 0, comments: 0, engagement: 0, count: 0 }
        };

        // Somme des données sur la période filtrée pour chaque plateforme
        filteredData.forEach(dayData => {
            for (const platform in platformData) {
                if (dayData[platform]) {
                    platformData[platform].followers += dayData[platform].followers || 0;
                    platformData[platform].views += dayData[platform].views || 0;
                    platformData[platform].likes += dayData[platform].likes || 0;
                    platformData[platform].comments += dayData[platform].comments || 0;
                    if (dayData[platform].engagement) {
                        platformData[platform].engagement += dayData[platform].engagement;
                        platformData[platform].count++;
                    }
                }
            }
        });

        // Pour les tendances, nous aurions besoin de données de la période précédente pour un calcul précis.
        // Ici, nous allons simuler des tendances pour chaque plateforme.
        const platformTrends = {
            youtube: Math.random() * (0.15) - 0.05, // -5% to +10%
            instagram: Math.random() * (0.12) - 0.04,
            tiktok: Math.random() * (0.20) - 0.06,
            facebook: Math.random() * (0.08) - 0.03,
            twitter: Math.random() * (0.07) - 0.02
        };


        dataTableBody.innerHTML = ''; // Vide le tableau existant

        const platforms = ['youtube', 'instagram', 'tiktok', 'facebook', 'twitter'];
        const platformNames = {
          youtube: { name: 'YouTube', icon: 'fab fa-youtube', color: '#FF0000' },
          instagram: { name: 'Instagram', icon: 'fab fa-instagram', color: '#E1306C' },
          tiktok: { name: 'TikTok', icon: 'fab fa-tiktok', color: '#000000' }, // Ou #69C9D0
          facebook: { name: 'Facebook', icon: 'fab fa-facebook', color: '#1877F2' },
          twitter: { name: 'Twitter', icon: 'fab fa-twitter', color: '#1DA1F2' }
        };

        platforms.forEach(p => {
          const row = dataTableBody.insertRow();
          const pInfo = platformNames[p];
          const data = platformData[p];
          const trendValue = platformTrends[p] * 100;
          const trendClass = trendValue >= 0 ? 'up' : 'down';
          const trendIcon = trendValue >= 0 ? 'fa-arrow-up' : 'fa-arrow-down';

          // Pour la tendance, nous voulons simuler l'évolution par rapport au début de la période
          // Plutôt qu'une valeur aléatoire pure.
          // Prenons la différence entre la valeur actuelle et la première valeur de la période.
          const firstValue = filteredData[0] ? filteredData[0][p]?.followers : 0;
          const lastValue = filteredData[filteredData.length - 1] ? filteredData[filteredData.length - 1][p]?.followers : 0;
          let actualTrend = 0;
          if (firstValue > 0) {
              actualTrend = ((lastValue - firstValue) / firstValue) * 100;
          } else if (lastValue > 0) { // Si la première valeur est 0 mais la dernière est positive
              actualTrend = 100; // Augmentation de 100%
          } else {
              actualTrend = 0; // Pas de changement
          }
          const actualTrendClass = actualTrend >= 0 ? 'up' : 'down';
          const actualTrendIcon = actualTrend >= 0 ? 'fa-arrow-up' : 'fa-arrow-down';


          row.innerHTML = `
            <td class="platform-cell">
              <i class="${pInfo.icon} platform-icon" style="color: ${pInfo.color};"></i>
              <span>${pInfo.name}</span>
            </td>
            <td>${formatNumber(data.followers)}</td>
            <td>${formatNumber(data.views)}</td>
            <td>${formatNumber(data.likes)}</td>
            <td>${formatNumber(data.comments)}</td>
            <td>${data.count > 0 ? (data.engagement / data.count).toFixed(1) + '%' : '0.0%'}</td>
            <td class="trend ${actualTrendClass}"><i class="fas ${actualTrendIcon}"></i> ${Math.abs(actualTrend).toFixed(1)}%</td>
          `;
        });
      }


      /**
       * Fonction principale pour mettre à jour l'interface en fonction des filtres.
       */
      async function applyFilters() {
        loadingOverlay.style.display = 'flex'; // Afficher le loader

        // Simuler un délai de chargement des données
        await new Promise(resolve => setTimeout(resolve, 800));

        const selectedPlatform = platformSelect.value;
        const selectedPeriod = periodSelect.value;
        const selectedMetric = metricSelect.value;

        const filteredData = filterDataByPeriod(rawData, selectedPeriod);

        updateStatCards(filteredData, selectedPlatform);
        updateMainChart(filteredData, selectedPlatform, selectedMetric);
        updatePlatformChart(filteredData);
        updateDataTable(filteredData, selectedPeriod);

        loadingOverlay.style.display = 'none'; // Cacher le loader
      }

      // --- Event Listeners ---

      // Hamburger menu toggle
      hamburger.addEventListener("click", () => {
        header.classList.toggle("open");
      });
      
      // Close menu when clicking outside
      document.addEventListener("click", (e) => {
        if (!header.contains(e.target) && header.classList.contains("open")) {
          header.classList.remove("open");
        }
      });
      
      // Filter change events
      platformSelect.addEventListener('change', applyFilters);
      periodSelect.addEventListener('change', applyFilters);
      metricSelect.addEventListener('change', applyFilters);
      refreshDataBtn.addEventListener('click', applyFilters); // Bouton d'actualisation

      // Newsletter form submission
      newsletterForm.addEventListener("submit", function(e) {
        e.preventDefault();
        const emailInput = this.querySelector('input[type="email"]');
        
        newsletterMessage.textContent = "Merci pour votre inscription! Vous recevrez bientôt nos actualités.";
        newsletterMessage.style.display = "block";
        emailInput.value = "";
        
        setTimeout(() => {
          newsletterMessage.style.display = "none";
        }, 5000);
      });
      
      // Logout button
      logoutBtn.addEventListener('click', function() {
        if (confirm("Voulez-vous vraiment vous déconnecter ?")) {
          window.location.href = 'login.html'; // Remplacez par votre page de connexion
        }
      });

      // Export Buttons (Placeholder for now)
      exportPdfBtn.addEventListener('click', () => {
        alert("Fonctionnalité d'exportation PDF à implémenter.");
        // Pour une exportation réelle, vous auriez besoin d'une librairie comme jsPDF ou d'un service backend.
      });

      exportCsvBtn.addEventListener('click', () => {
        alert("Fonctionnalité d'exportation CSV à implémenter.");
        // Pour une exportation réelle, vous pourriez générer un CSV simple côté client.
        // Exemple simple :
        /*
        const data = filteredData; // Utilisez vos données filtrées
        let csvContent = "data:text/csv;charset=utf-8,";
        csvContent += "Date,YouTube Followers,YouTube Views,Instagram Followers,...\n"; // En-têtes

        data.forEach(row => {
            let rowData = [
                row.date,
                row.youtube.followers,
                row.youtube.views,
                row.instagram.followers,
                // ... ajoutez toutes les colonnes que vous voulez exporter
            ].join(",");
            csvContent += rowData + "\n";
        });

        const encodedUri = encodeURI(csvContent);
        const link = document.createElement("a");
        link.setAttribute("href", encodedUri);
        link.setAttribute("download", "statistiques.csv");
        document.body.appendChild(link); // Required for Firefox
        link.click();
        document.body.removeChild(link);
        */
      });

      // --- Background Animation Init ---
      const backgroundAnimation = document.querySelector(".background-animation");
      const numberOfClouds = 15;
      
      for (let i = 0; i < numberOfClouds; i++) {
        const cloud = document.createElement("div");
        cloud.classList.add("cloud");
        
        const size = Math.random() * (200 - 100) + 100;
        cloud.style.width = `${size}px`;
        cloud.style.height = `${size * 0.6}px`;
        cloud.style.borderRadius = `${size / 2}px / ${size * 0.3}px`;
        
        cloud.style.left = `${Math.random() * 100 + 100}vw`;
        cloud.style.top = `${Math.random() * 85}vh`;
        
        const animationDuration = Math.random() * (50 - 25) + 25;
        cloud.style.animationDuration = `${animationDuration}s`;
        
        cloud.style.animationDelay = `${Math.random() * -animationDuration}s`;
        
        cloud.style.setProperty("--width", `${size}px`);
        const scale = Math.random() * (1.1 - 0.9) + 0.9;
        cloud.style.setProperty("--scale", scale);
        
        backgroundAnimation.appendChild(cloud);
      }

      // --- Initial Load of Data ---
      applyFilters();
    });
  </script>
</body>
</html>
