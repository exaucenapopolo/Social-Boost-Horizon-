<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Espace Revendeur - Social Boost Horizon</title>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
  
  <!-- Fonts (corrigé) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@600;700;800&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">

  <!-- AOS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

  <style>
    /* Variables & fond global bleu sombre */
    :root {
      --sbh-dark-blue: #0A162B;
      --sbh-gradient-start: #1e3c72;
      --sbh-gradient-end: #6a0dad;
      --sbh-btn-color: #1E90FF;
      --sbh-btn-hover: #187bcd;
      --sbh-icon-color: #4CAF50;
      --sbh-text-white: #FFFFFF;
      --sbh-text-green: #4CAF50;
      --sbh-card-bg: rgba(17, 32, 58, 0.6);
      --sbh-card-border: rgba(255, 255, 255, 0.1);
      --sbh-text-light: rgba(255, 255, 255, 0.9);
      --sbh-accent: #FF6B6B;
      --sbh-light-blue: #4DA6FF;
      --sbh-card-radius: 12px;
      --gold-primary: #FFD700;
      --reseller-beginner: #42A5F5; /* Bleu */
      --reseller-amateur: #4CAF50; /* Vert */
      --reseller-intermediate: #FFC107; /* Jaune */
      --reseller-professional: #FF5722; /* Orange */
      --resign-btn: #e74c3c; /* Rouge pour le bouton de démission */
      --resign-hover: #c0392b; /* Rouge plus foncé au survol */
    }

    /* Reset global & typographie */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Roboto', sans-serif;
      color: var(--sbh-text-white);
      background: var(--sbh-dark-blue);
      position: relative;
      min-height: 100vh;
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
    }

    /* Background animation - stars + clouds */
    .background-animation {
      position: fixed;
      inset: 0;
      z-index: 0; /* behind content */
      background: linear-gradient(180deg, #061028 0%, #031022 100%);
      overflow: hidden;
      pointer-events: none;
    }
    .background-animation::before,
    .background-animation::after {
      content: "";
      position: absolute;
      border-radius: 50%;
      background-color: rgba(255,255,255,0.4);
      animation: twinkle 5s infinite alternate;
      pointer-events: none;
    }
    .background-animation::before {
      width: 2px;
      height: 2px;
      box-shadow:
        100px 50px 0 0 white, 200px 150px 0 0 white, 300px 250px 0 0 white,
        400px 70px 0 0 white, 50px 300px 0 0 white, 350px 100px 0 0 white,
        500px 400px 0 0 white, 600px 120px 0 0 white, 700px 350px 0 0 white,
        80px 10px 0 0 white, 420px 220px 0 0 white, 680px 50px 0 0 white,
        150px 450px 0 0 white, 550px 320px 0 0 white, 220px 180px 0 0 white,
        780px 280px 0 0 white, 120px 70px 0 0 white, 480px 380px 0 0 white,
        850px 150px 0 0 white, 90px 390px 0 0 white;
      animation-delay: 0s;
    }
    .background-animation::after {
      width: 3px;
      height: 3px;
      box-shadow:
        150px 200px 0 0 white, 250px 300px 0 0 white, 50px 100px 0 0 white,
        300px 10px 0 0 white, 450px 200px 0 0 white, 10px 250px 0 0 white,
        550px 50px 0 0 white, 650px 280px 0 0 white, 750px 150px 0 0 white,
        20px 400px 0 0 white, 380px 180px 0 0 white, 620px 430px 0 0 white,
        250px 20px 0 0 white, 700px 480px 0 0 white, 330px 50px 0 0 white,
        800px 300px 0 0 white, 50px 500px 0 0 white, 900px 200px 0 0 white,
        180px 420px 0 0 white, 720px 100px 0 0 white;
      animation-delay: 2s;
    }
    @keyframes twinkle {
      0%   { opacity: 0.3; transform: scale(1); }
      50%  { opacity: 0.7; transform: scale(1.1); }
      100% { opacity: 0.3; transform: scale(1); }
    }

    .background-animation .cloud {
      position: absolute;
      background: white;
      border-radius: 50%;
      opacity: 0.08;
      filter: blur(20px);
      animation: moveClouds linear infinite;
      pointer-events: none;
    }
    @keyframes moveClouds {
      0%   { transform: translateX(0) scale(var(--scale, 1)); }
      100% { transform: translateX(calc(100vw + var(--width, 200px))) scale(var(--scale, 1)); }
    }

    /* Main content */
    .main-content {
      position: relative;
      z-index: 2; /* above background */
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    h1,h2,h3 { font-family: 'Montserrat', sans-serif; color: var(--sbh-text-white); text-align: center; }
    h2 { font-size: 1.8rem; margin-bottom: 1rem; display:inline-block; position:relative; }
    h2::after { content:""; position:absolute; bottom:-10px; left:50%; transform:translateX(-50%); width:80px; height:4px; background: linear-gradient(90deg,var(--sbh-gradient-start),var(--sbh-gradient-end)); border-radius:2px; }
    p { font-size:1rem; color:var(--sbh-text-light); margin-bottom:1rem; line-height:1.6; }

    /* HEADER */
    header {
      position: sticky;
      top: 0;
      background: linear-gradient(45deg, var(--sbh-gradient-start), var(--sbh-gradient-end));
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.5rem;
      z-index: 100;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .header-icons { display:flex; align-items:center; gap:15px; }
    .logo-text { display:flex; flex-direction:column; text-decoration:none; line-height:1.2; color:var(--sbh-text-white); }
    .logo-text .text-social, .logo-text .text-horizon { color: var(--sbh-text-white); font-size:1.1rem; font-weight:600; }
    .logo-text .boost-line { display:flex; align-items:center; color:var(--sbh-text-green); font-size:1.5rem; font-weight:800; }
    .logo-text .boost-line img { height:1.5rem; margin-right:0.3rem; animation:pulse 2s infinite; }
    @keyframes pulse { 0%{ transform: scale(1);}50%{transform:scale(1.05);}100%{transform:scale(1);} }
    .icon-hamburger { font-size:1.5rem; color:var(--sbh-text-white); cursor:pointer; transition: transform 0.3s; }
    .icon-hamburger:hover { transform:scale(1.05); }

    .snap-avatar {
      display:flex; align-items:center; justify-content:center; width:38px; height:38px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fffc00, #ffdc00 50%, #ffbc00);
      color:white; font-size:1.2rem; cursor:pointer; transition: all .3s; overflow:hidden; box-shadow:0 2px 8px rgba(0,0,0,0.2); border:2px solid white;
    }
    .snap-avatar::after { content:""; position:absolute; top:0; left:0; width:100%; height:100%; background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent); transform: translateX(-100%); transition: transform .3s ease; }
    .snap-avatar:hover { transform: translateY(-2px) rotate(5deg); box-shadow:0 4px 12px rgba(255,220,0,0.4); }
    .snap-avatar:hover::after { transform: translateX(100%); }

    .mobile-menu {
      display:none;
      position:absolute;
      top:65px;
      right:1.5rem;
      background: rgba(10,22,43,0.95);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius:10px;
      padding:1.2rem;
      flex-direction:column;
      z-index:200;
      min-width:220px;
      box-shadow:0 8px 25px rgba(0,0,0,0.3);
    }
    header.open .mobile-menu { display:flex; }
    .mobile-menu a { color:var(--sbh-text-white); text-decoration:none; padding:0.7rem 0.9rem; font-weight:500; border-bottom:1px solid rgba(255,255,255,0.1); display:flex; align-items:center; font-size:0.9rem; }
    .mobile-menu a:last-child { border-bottom:none; }
    .mobile-menu a i { margin-right:8px; color:var(--sbh-light-blue); width:20px; text-align:center; font-size:0.9rem; }

    /* SOLDE & DÉPÔT */
    .balance-section {
      display:flex; justify-content:space-between; align-items:center; padding:12px 20px; margin:15px; background: rgba(20,35,60,0.6);
      border-radius:12px; box-shadow:0 6px 20px rgba(0,0,0,0.2); backdrop-filter: blur(10px); position:relative; overflow:hidden; z-index:2;
    }
    .balance-section span { font-family:'Montserrat',sans-serif; color:var(--sbh-text-white); font-size:1rem; font-weight:600; display:flex; align-items:center; gap:6px; }
    .balance-section button { background: linear-gradient(45deg,var(--sbh-gradient-start),var(--sbh-btn-color)); border:none; color:#fff; padding:8px 16px; border-radius:40px; cursor:pointer; font-family:'Montserrat',sans-serif; font-weight:600; font-size:0.9rem; box-shadow:0 3px 12px rgba(30,144,255,0.3); transition: all .3s ease; position:relative; overflow:hidden; }
    .balance-section button:hover { transform: translateY(-2px); box-shadow:0 6px 18px rgba(30,144,255,0.4); }

    /* Conteneurs revendeur et cartes */
    .reseller-container { max-width:1200px; margin:0 auto; padding:15px; display:flex; flex-direction:column; gap:25px; z-index:2; }
    .reseller-section { background: rgba(20,35,60,0.6); border:1px solid rgba(255,255,255,0.15); border-radius:12px; padding:25px; box-shadow:0 6px 20px rgba(0,0,0,0.2); backdrop-filter: blur(5px); }
    .reseller-explanation h2 { margin-bottom:8px; }
    .reseller-header { text-align:center; padding:18px; background: linear-gradient(135deg,#1e3c72,#6a0dad); border-radius:12px; box-shadow:0 8px 25px rgba(0,0,0,0.3); position:relative; overflow:hidden; border-left:4px solid var(--gold-primary); }
    .reseller-status { display:flex; justify-content:center; gap:15px; margin-top:15px; flex-wrap:wrap; }
    .status-card { background: rgba(25,40,65,0.7); border-radius: var(--sbh-card-radius); padding:15px; min-width:170px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.2); border:1px solid; transition:all .3s ease; position:relative; overflow:hidden; flex:1; }
    .status-card h3 { font-size:1.1rem; margin-bottom:8px; color:var(--sbh-text-white); }
    .status-card .level { font-size:1.5rem; font-weight:700; margin-bottom:8px; }
    .status-card.beginner { border-color:var(--reseller-beginner); }
    .status-card.amateur { border-color:var(--reseller-amateur); }
    .status-card.intermediate { border-color:var(--reseller-intermediate); }
    .status-card.professional { border-color:var(--reseller-professional); }
    .status-card .discount { font-size:1rem; background: rgba(255,255,255,0.1); padding:6px; border-radius:6px; display:inline-block; }
    .status-card .requirements { font-size:0.8rem; color:rgba(255,255,255,0.8); margin-top:8px; }

    .reseller-stats { display:flex; gap:15px; justify-content:center; margin-top:12px; flex-wrap:wrap; }
    .stat-box { background: rgba(30,45,70,0.8); border-radius:10px; padding:12px 20px; min-width:150px; text-align:center; border:1px solid rgba(255,255,255,0.1); flex:1; }
    .stat-box .value { font-size:1.8rem; font-weight:700; margin:8px 0; color:var(--gold-primary); }
    .stat-box .label { font-size:0.85rem; color:var(--sbh-text-light); }

    .services-grid { display:grid; grid-template-columns: repeat(auto-fill,minmax(250px,1fr)); gap:15px; margin-top:15px; }
    .service-card { 
      background: rgba(25,40,65,0.7); 
      border-radius: var(--sbh-card-radius); 
      padding:18px; 
      border:1px solid rgba(255,255,255,0.1); 
      transition:all .3s ease; 
      position:relative; 
      overflow:hidden;
      transform-style: preserve-3d;
      perspective: 1000px;
    }
    .service-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--sbh-gradient-start), var(--sbh-gradient-end);
      transform: scaleX(0);
      transform-origin: 0 50%;
      transition: transform 0.5s ease;
      z-index: 1;
    }
    .service-card:hover::before {
      transform: scaleX(1);
    }
    .service-card:hover {
      transform: translateY(-5px) rotateX(5deg);
      box-shadow: 0 15px 30px rgba(0,0,0,0.3);
    }
    .service-card h3 { font-size:1.1rem; margin-bottom:12px; color:var(--sbh-light-blue); text-align:center; }
    .price-comparison { display:flex; justify-content:space-between; margin:12px 0; padding:10px; background: rgba(0,0,0,0.2); border-radius:6px; }
    .price-item { display:flex; flex-direction:column; align-items:center; }
    .price-label { font-size:0.8rem; color:var(--sbh-text-light); margin-bottom:4px; }
    .price-value { font-weight:700; font-size:0.95rem; }
    .normal-price { text-decoration:line-through; color:var(--sbh-accent); }
    .reseller-price { color:var(--sbh-text-green); }
    .savings { background: rgba(76,175,80,0.2); padding:4px 8px; border-radius:15px; font-size:0.8rem; margin-top:4px; }

    .reseller-actions { display:flex; justify-content:center; gap:12px; margin-top:25px; flex-wrap:wrap; }
    .reseller-btn { padding:10px 20px; border-radius:40px; font-weight:600; cursor:pointer; transition:all .3s ease; font-size:0.9rem; border:none; display:flex; align-items:center; gap:6px; }
    .btn-become-reseller { 
      background: linear-gradient(45deg,var(--reseller-beginner),var(--reseller-amateur)); 
      color:white; 
      animation: pulse-glow 2s infinite;
    }
    .btn-orders { background: linear-gradient(45deg,var(--sbh-gradient-start),var(--sbh-btn-color)); color:white; }
    .btn-commander { background: linear-gradient(45deg,var(--reseller-intermediate),var(--reseller-professional)); color:white; }
    .btn-dashboard { background: rgba(255,255,255,0.1); color:white; border:1px solid rgba(255,255,255,0.3); }
    .btn-resign { background: linear-gradient(45deg, var(--resign-btn), #d63031); color:white; box-shadow: 0 4px 10px rgba(231,76,60,0.3); }
    .btn-resign:hover { background: linear-gradient(45deg, var(--resign-hover), #b71540); transform: translateY(-2px); box-shadow:0 6px 14px rgba(231,76,60,0.4); }
    .reseller-btn:hover { transform: translateY(-2px); box-shadow:0 4px 12px rgba(0,0,0,0.3); }

    .reseller-info { background: rgba(30,45,70,0.8); border-radius:10px; padding:20px; margin-top:15px; border-left:3px solid var(--gold-primary); }
    .reseller-info h3 { font-size:1.1rem; margin-bottom:15px; color:var(--gold-primary); text-align:center; }
    .reseller-info p, .reseller-info li { font-size:0.9rem; line-height:1.7; margin-bottom:12px; text-align:justify; }

    /* Animation de pulsation pour le bouton devenir revendeur */
    @keyframes pulse-glow {
      0% {
        box-shadow: 0 0 0 0 rgba(66, 165, 245, 0.7);
      }
      70% {
        box-shadow: 0 0 0 10px rgba(66, 165, 245, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(66, 165, 245, 0);
      }
    }

    /* Animation de scroll personnalisée */
    .scroll-animate {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    .scroll-animate.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* Icônes supplémentaires */
    .icon-with-badge {
      position: relative;
      display: inline-block;
    }
    .icon-badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background-color: var(--sbh-accent);
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 0.7rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Effet de brillance sur les cartes */
    .shine-effect {
      position: relative;
      overflow: hidden;
    }
    .shine-effect::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: rgba(255, 255, 255, 0.1);
      transform: rotate(30deg);
      transition: all 0.6s;
      opacity: 0;
    }
    .shine-effect:hover::after {
      opacity: 1;
      top: -30%;
      left: -30%;
      width: 160%;
      height: 160%;
    }

    /* Animation de chargement */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
      margin-right: 10px;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Indicateur de niveau actuel */
    .current-level-indicator {
      position: absolute;
      top: -10px;
      right: -10px;
      background: var(--gold-primary);
      color: var(--sbh-dark-blue);
      border-radius: 50%;
      width: 25px;
      height: 25px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.8rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      z-index: 5;
    }

    /* responsive */
    @media (max-width:768px) {
      header { padding:0.8rem 1rem; }
      .logo-text .text-social, .logo-text .text-horizon { font-size:0.95rem; }
      .logo-text .boost-line { font-size:1.3rem; }
      .snap-avatar { width:34px; height:34px; font-size:1rem; }
      .mobile-menu { top:60px; right:1rem; min-width:200px; padding:1rem; }
      .reseller-status, .reseller-stats { flex-direction:column; align-items:center; gap:10px; }
      .status-card, .stat-box { width:100%; max-width:100%; min-width:auto; }
      .reseller-actions { flex-direction:column; gap:10px; }
      .reseller-section { padding:18px 12px; }
    }

  </style>
</head>
<body>
  <!-- Fond animé (étoiles + nuages) -->
  <div class="background-animation" aria-hidden="true"></div>

  <!-- Contenu principal -->
  <div class="main-content">
    <!-- Header avec logo, icône profil et menu hamburger -->
    <header data-aos="fade-down">
      <a href="dashboard.html" class="logo-text" aria-label="Aller au dashboard">
        <span class="text-social">SOCIAL</span>
        <div class="boost-line" aria-hidden="true">
          <img src="https://raw.githubusercontent.com/exaucenapopolo/Social-Boost-Horizon-/refs/heads/main/assets/logos/Logo%20social%20Boost%20horizon.jpg" alt="Logo" onerror="this.style.display='none'">
          <span class="text-boost">BOOST</span>
        </div>
        <span class="text-horizon">HORIZON</span>
      </a>

      <div class="header-icons">
        <a href="profil.html" class="snap-avatar" title="Profil utilisateur">👤</a>
        <i class="fa-solid fa-bars icon-hamburger" id="hamburgerBtn" aria-hidden="true"></i>
      </div>

      <nav class="mobile-menu" id="mobileMenu" aria-hidden="true">
        <a href="dashboard.html"><i class="fa-solid fa-house"></i> Accueil</a>
        <a href="wallet.html"><i class="fa-solid fa-wallet"></i> Mon portefeuille</a>
        <a href="resources.html"><i class="fa-solid fa-book"></i> Ressources & aide</a>
        <a href="community.html"><i class="fa-solid fa-users"></i> Communauté</a>
        <a href="nouveautes.html"><i class="fa-solid fa-bullhorn"></i> Nouveautés et Annonces</a>
        <a href="payment.html"><i class="fa-solid fa-money-bill"></i> Autre paiement</a>
        <a href="parrainage.html"><i class="fa-solid fa-handshake"></i> Parrainage</a>
        <a href="privacy.html"><i class="fa-solid fa-shield"></i> Confidentialité</a>
        <a href="assistant.html"><i class="fa-solid fa-headset"></i> Assistance</a>
        <a href="https://chat.whatsapp.com/HRgWJFxTgkiEkEC0Ou2028" target="_blank" rel="noopener"><i class="fab fa-whatsapp"></i> Rejoindre WhatsApp</a>
      </nav>
    </header>

    <!-- Section solde -->
    <div class="balance-section" data-aos="fade-up">
      <span id="balance"><i class="fas fa-coins"></i> Solde : <span class="loading-spinner" id="balanceSpinner"></span><span id="balanceAmount">Chargement...</span></span>
      <button id="quickDeposit">➕ Déposer</button>
    </div>

    <!-- Espace Revendeur -->
    <div class="reseller-container">
      <!-- Section d'explication -->
      <div class="reseller-section scroll-animate">
        <div class="reseller-explanation">
          <h2><i class="fas fa-crown"></i> Programme Revendeur Social Boost Horizon</h2>
          <p>Devenez revendeur officiel de Social Boost Horizon et bénéficiez de tarifs préférentiels pour vos commandes de boost sur les réseaux sociaux. En tant que revendeur, vous profitez de remises exclusives qui augmentent avec votre niveau d'activité.</p>
          
          <div class="reseller-info shine-effect">
            <h3><i class="fas fa-question-circle"></i> Comment devenir revendeur ?</h3>
            <p>Pour devenir revendeur, il vous suffit de cliquer sur le bouton "Devenir revendeur". Votre statut sera immédiatement activé avec le niveau "Débutant" et vous bénéficierez d'une remise de 5% sur toutes vos commandes.</p>
            
            <h3><i class="fas fa-star"></i> Avantages du statut revendeur :</h3>
            <ul>
              <li><i class="fas fa-percent"></i> Remises importantes sur tous les services (de 5% à 20%)</li>
              <li><i class="fas fa-clock"></i> Accès prioritaire aux nouveaux services et fonctionnalités</li>
              <li><i class="fas fa-headset"></i> Support client dédié et prioritaire</li>
              <li><i class="fas fa-chart-line"></i> Tableau de bord personnalisé pour suivre vos économies</li>
              <li><i class="fas fa-gift"></i> Programme de fidélité avec récompenses supplémentaires</li>
            </ul>
            
            <h3><i class="fas fa-chart-bar"></i> Comment progresser dans les niveaux ?</h3>
            <p>Votre niveau est déterminé par le nombre de commandes que vous passez sur une période de 7 jours :</p>
            
            <div class="reseller-stats">
              <div class="stat-box scroll-animate">
                <div class="value">Débutant</div>
                <div class="label">5% de remise</div>
                <div class="requirements"><i class="fas fa-shopping-cart"></i> 5-6 commandes/semaine</div>
              </div>
              
              <div class="stat-box scroll-animate">
                <div class="value">Amateur</div>
                <div class="label">10% de remise</div>
                <div class="requirements"><i class="fas fa-shopping-cart"></i> 7-9 commandes/semaine</div>
              </div>
              
              <div class="stat-box scroll-animate">
                <div class="value">Intermédiaire</div>
                <div class="label">15% de remise</div>
                <div class="requirements"><i class="fas fa-shopping-cart"></i> 10-19 commandes/semaine</div>
              </div>
              
              <div class="stat-box scroll-animate">
                <div class="value">Professionnel</div>
                <div class="label">20% de remise</div>
                <div class="requirements"><i class="fas fa-shopping-cart"></i> 20+ commandes/semaine</div>
              </div>
            </div>
            
            <p><i class="fas fa-sync-alt"></i> Chaque semaine, nous recalculons automatiquement votre niveau en fonction de votre activité. Si vous maintenez un volume de commandes élevé, vous conservez vos avantages !</p>
          </div>
        </div>
      </div>
      
      <!-- En-tête de l'espace revendeur -->
      <div class="reseller-header scroll-animate">
        <h1><i class="fas fa-store"></i> Votre Espace Revendeur</h1>
        <p>Profitez d'avantages exclusifs et de remises importantes en fonction de votre niveau d'activité</p>
        
        <div class="reseller-status">
          <div class="status-card beginner shine-effect" id="beginnerCard">
            <h3><i class="fas fa-seedling"></i> Débutant</h3>
            <div class="level">5%</div>
            <div class="discount"><i class="fas fa-tag"></i> Remise</div>
            <div class="requirements"><i class="fas fa-shopping-cart"></i> 5-6 commandes/semaine</div>
          </div>
          
          <div class="status-card amateur shine-effect" id="amateurCard">
            <h3><i class="fas fa-leaf"></i> Amateur</h3>
            <div class="level">10%</div>
            <div class="discount"><i class="fas fa-tag"></i> Remise</div>
            <div class="requirements"><i class="fas fa-shopping-cart"></i> 7-9 commandes/semaine</div>
          </div>
          
          <div class="status-card intermediate shine-effect" id="intermediateCard">
            <h3><i class="fas fa-rocket"></i> Intermédiaire</h3>
            <div class="level">15%</div>
            <div class="discount"><i class="fas fa-tag"></i> Remise</div>
            <div class="requirements"><i class="fas fa-shopping-cart"></i> 10-19 commandes/semaine</div>
          </div>
          
          <div class="status-card professional shine-effect" id="professionalCard">
            <h3><i class="fas fa-crown"></i> Professionnel</h3>
            <div class="level">20%</div>
            <div class="discount"><i class="fas fa-tag"></i> Remise</div>
            <div class="requirements"><i class="fas fa-shopping-cart"></i> 20+ commandes/semaine</div>
          </div>
        </div>
        
        <div class="reseller-stats">
          <div class="stat-box scroll-animate">
            <div class="value" id="currentLevel"><span class="loading-spinner" id="levelSpinner"></span><span>Chargement...</span></div>
            <div class="label"><i class="fas fa-chart-line"></i> Niveau actuel</div>
          </div>
          
          <div class="stat-box scroll-animate">
            <div class="value" id="totalOrders"><span class="loading-spinner" id="ordersSpinner"></span><span>0</span></div>
            <div class="label"><i class="fas fa-shopping-basket"></i> Total commandes</div>
          </div>
          
          <!-- Nouvelle case pour le total des commandes de la semaine -->
          <div class="stat-box scroll-animate">
            <div class="value" id="weeklyOrders"><span class="loading-spinner" id="weeklySpinner"></span><span>0</span></div>
            <div class="label"><i class="fas fa-calendar-week"></i> Commandes cette semaine</div>
          </div>
          
          <div class="stat-box scroll-animate">
            <div class="value" id="discountRate"><span class="loading-spinner" id="discountSpinner"></span><span>0%</span></div>
            <div class="label"><i class="fas fa-percent"></i> Remise actuelle</div>
          </div>

          <div class="stat-box scroll-animate">
            <div class="value" id="savingsAmount">0 FCFA</div>
            <div class="label"><i class="fas fa-piggy-bank"></i> Économies totales</div>
          </div>
        </div>
      </div>
      
      <!-- Section des services avec remise -->
      <div class="reseller-section scroll-animate">
        <h2><i class="fas fa-tags"></i> Nos Services avec Remise</h2>
        <p>Les prix barrés sont les prix normaux. Les prix remisés sont calculés en fonction de votre niveau de revendeur.</p>
        
        <div class="services-grid">
          <!-- Service 1 -->
          <div class="service-card shine-effect">
            <h3><i class="fab fa-instagram"></i> Followers Instagram</h3>
            <div class="price-comparison">
              <div class="price-item">
                <span class="price-label">Normal</span>
                <span class="price-value normal-price">2,500 FCFA</span>
              </div>
              <div class="price-item">
                <span class="price-label">Revendeur</span>
                <span class="price-value reseller-price" data-original="2500">Calcul...</span>
                <span class="savings">Économisez <span class="savings-percent">0%</span></span>
              </div>
            </div>
            <p><i class="fas fa-shield-alt"></i> Abonnés de haute qualité avec garantie de rétention</p>
          </div>
          
          <!-- Service 2 -->
          <div class="service-card shine-effect">
            <h3><i class="fab fa-tiktok"></i> Likes TikTok</h3>
            <div class="price-comparison">
              <div class="price-item">
                <span class="price-label">Normal</span>
                <span class="price-value normal-price">500 FCFA</span>
              </div>
              <div class="price-item">
                <span class="price-label">Revendeur</span>
                <span class="price-value reseller-price" data-original="500">Calcul...</span>
                <span class="savings">Économisez <span class="savings-percent">0%</span></span>
              </div>
            </div>
            <p><i class="fas fa-users"></i> J'aime de comptes réels pour booster votre visibilité</p>
          </div>
          
          <!-- Service 3 -->
          <div class="service-card shine-effect">
            <h3><i class="fab fa-youtube"></i> Vues YouTube</h3>
            <div class="price-comparison">
              <div class="price-item">
                <span class="price-label">Normal</span>
                <span class="price-value normal-price">1,550 FCFA</span>
              </div>
              <div class="price-item">
                <span class="price-label">Revendeur</span>
                <span class="price-value reseller-price" data-original="1550">Calcul...</span>
                <span class="savings">Économisez <span class="savings-percent">0%</span></span>
              </div>
            </div>
            <p><i class="fas fa-chart-line"></i> Vues de haute qualité avec bon taux de rétention</p>
          </div>
          
          <!-- Service 4 -->
          <div class="service-card shine-effect">
            <h3><i class="fab fa-facebook"></i> Abonnés Facebook</h3>
            <div class="price-comparison">
              <div class="price-item">
                <span class="price-label">Normal</span>
                <span class="price-value normal-price">2,000 FCFA</span>
              </div>
              <div class="price-item">
                <span class="price-label">Revendeur</span>
                <span class="price-value reseller-price" data-original="2000">Calcul...</span>
                <span class="savings">Économisez <span class="savings-percent">0%</span></span>
              </div>
            </div>
            <p><i class="fas fa-thumbs-up"></i> Followers pour votre page Facebook professionnelle</p>
          </div>

          <!-- Service 5 -->
          <div class="service-card shine-effect">
            <h3><i class="fab fa-twitter"></i> Followers Twitter</h3>
            <div class="price-comparison">
              <div class="price-item">
                <span class="price-label">Normal</span>
                <span class="price-value normal-price">1,800 FCFA</span>
              </div>
              <div class="price-item">
                <span class="price-label">Revendeur</span>
                <span class="price-value reseller-price" data-original="1800">Calcul...</span>
                <span class="savings">Économisez <span class="savings-percent">0%</span></span>
              </div>
            </div>
            <p><i class="fas fa-retweet"></i> Abonnés actifs pour augmenter votre influence</p>
          </div>

          <!-- Service 6 -->
          <div class="service-card shine-effect">
            <h3><i class="fab fa-twitch"></i> Viewers Twitch</h3>
            <div class="price-comparison">
              <div class="price-item">
                <span class="price-label">Normal</span>
                <span class="price-value normal-price">2,200 FCFA</span>
              </div>
              <div class="price-item">
                <span class="price-label">Revendeur</span>
                <span class="price-value reseller-price" data-original="2200">Calcul...</span>
                <span class="savings">Économisez <span class="savings-percent">0%</span></span>
              </div>
            </div>
            <p><i class="fas fa-gamepad"></i> Spectateurs pour vos streams en direct</p>
          </div>
        </div>
      </div>
      
      <!-- Actions et informations -->
      <div class="reseller-section scroll-animate">
        <h2><i class="fas fa-cog"></i> Gérer votre Statut Revendeur</h2>
        
        <div class="reseller-actions" id="resellerActions">
          <!-- Bouton pour devenir revendeur (affiché si non revendeur) -->
          <button class="reseller-btn btn-become-reseller" id="becomeResellerBtn">
            <i class="fas fa-user-plus"></i> Devenir Revendeur
          </button>
          
          <!-- Boutons pour revendeurs (affichés si déjà revendeur) -->
          <a href="commandes.html" class="reseller-btn btn-orders" id="ordersBtn" style="display: none;">
            <i class="fas fa-shopping-cart"></i> Mes Commandes
          </a>
          
          <a href="command.html" class="reseller-btn btn-commander" id="commanderBtn" style="display: none;">
            <i class="fas fa-rocket"></i> Commander
          </a>
          
          <a href="dashboard.html" class="reseller-btn btn-dashboard" id="dashboardBtn" style="display: none;">
            <i class="fas fa-home"></i> Retour au Dashboard
          </a>
          
          <!-- Bouton de démission -->
          <button class="reseller-btn btn-resign" id="resignBtn" style="display: none;">
            <i class="fas fa-sign-out-alt"></i> Démissionner
          </button>
        </div>
        
        <div class="reseller-info shine-effect">
          <h3><i class="fas fa-info-circle"></i> Comment fonctionne le programme revendeur ?</h3>
          <ul>
            <li><i class="fas fa-calendar-check"></i> <strong>Vérification hebdomadaire</strong> : Chaque nuit, nous comptabilisons vos commandes des 7 derniers jours</li>
            <li><i class="fas fa-sync-alt"></i> <strong>Mise à jour automatique</strong> : Votre niveau de revendeur est mis à jour chaque semaine</li>
            <li><i class="fas fa-arrow-up"></i> <strong>Avantages</strong> : Profitez de remises plus importantes à mesure que votre activité augmente</li>
            <li><i class="fas fa-exclamation-triangle"></i> <strong>Révocation</strong> : Si votre nombre de commandes tombe sous le seuil minimal (5/semaine), votre statut sera révoqué</li>
            <li><i class="fas fa-door-open"></i> <strong>Démission</strong> : Vous pouvez quitter le programme revendeur à tout moment en cliquant sur "Démissionner"</li>
            <li><i class="fas fa-percentage"></i> <strong>Remises exclusives</strong> : Vos remises s'appliquent automatiquement sur toutes vos commandes</li>
            <li><i class="fas fa-chart-pie"></i> <strong>Suivi en temps réel</strong> : Consultez votre nombre de commandes et votre niveau dans votre espace revendeur</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  
  <script>
    // Configuration Firebase (laisse ta config)
    const firebaseConfig = {
      apiKey: "AIzaSyD2JiDS0g8EkeNXxjO7_wGI3WznpPvcCCk",
      authDomain: "social-boost-horizon.firebaseapp.com",
      projectId: "social-boost-horizon",
      storageBucket: "social-boost-horizon.appspot.com",
      messagingSenderId: "43658165639",
      appId: "1:43658165639:web:b8f492dc6a25cd12fc6722"
    };

    // Initialiser Firebase
    try {
      firebase.initializeApp(firebaseConfig);
    } catch (e) {
      // si déjà initialisé, ignorer
      console.warn("Firebase init warning:", e);
    }
    const db = firebase.firestore();
    const auth = firebase.auth();

    document.addEventListener("DOMContentLoaded", function () {
      AOS.init({ duration: 800, once: true, offset: 100 });

      // Animation des nuages - créer des éléments .cloud dans .background-animation
      const backgroundAnimation = document.querySelector(".background-animation");
      const numberOfClouds = 16;

      for (let i = 0; i < numberOfClouds; i++) {
        const cloud = document.createElement("div");
        cloud.classList.add("cloud");

        const size = Math.random() * (250 - 120) + 120;
        cloud.style.width = `${size}px`;
        cloud.style.height = `${size * 0.6}px`;
        cloud.style.borderRadius = `${size / 2}px / ${size * 0.3}px`;

        // positions début légèrement hors écran pour mouvement
        cloud.style.left = `${Math.random() * 140 - 20}vw`;
        cloud.style.top = `${Math.random() * 95}vh`;

        const animationDuration = Math.random() * (80 - 30) + 30;
        cloud.style.animationDuration = `${animationDuration}s`;
        cloud.style.setProperty("--width", `${size}px`);

        const scale = Math.random() * (1.2 - 0.8) + 0.8;
        cloud.style.setProperty("--scale", scale);

        backgroundAnimation.appendChild(cloud);
      }

      // Menu hamburger
      const header = document.querySelector("header");
      const hamburger = document.getElementById("hamburgerBtn");
      const mobileMenu = document.getElementById("mobileMenu");

      hamburger.addEventListener("click", (e) => {
        e.stopPropagation();
        header.classList.toggle("open");
        const opened = header.classList.contains("open");
        mobileMenu.setAttribute("aria-hidden", String(!opened));
      });

      // Fermer le menu quand on clique en dehors
      document.addEventListener("click", (e) => {
        if (header.classList.contains("open")) {
          const isClickInside = header.contains(e.target);
          if (!isClickInside) {
            header.classList.remove("open");
            mobileMenu.setAttribute("aria-hidden", "true");
          }
        }
      });

      // Éléments DOM
      const balanceEl = document.getElementById('balanceAmount');
      const balanceSpinner = document.getElementById('balanceSpinner');
      const quickDeposit = document.getElementById('quickDeposit');
      const becomeResellerBtn = document.getElementById('becomeResellerBtn');
      const ordersBtn = document.getElementById('ordersBtn');
      const commanderBtn = document.getElementById('commanderBtn');
      const dashboardBtn = document.getElementById('dashboardBtn');
      const resignBtn = document.getElementById('resignBtn');
      const currentLevelEl = document.getElementById('currentLevel');
      const levelSpinner = document.getElementById('levelSpinner');
      const totalOrdersEl = document.getElementById('totalOrders');
      const ordersSpinner = document.getElementById('ordersSpinner');
      const weeklyOrdersEl = document.getElementById('weeklyOrders');
      const weeklySpinner = document.getElementById('weeklySpinner');
      const discountRateEl = document.getElementById('discountRate');
      const discountSpinner = document.getElementById('discountSpinner');
      const savingsAmountEl = document.getElementById('savingsAmount');
      
      // Cartes de niveau
      const beginnerCard = document.getElementById('beginnerCard');
      const amateurCard = document.getElementById('amateurCard');
      const intermediateCard = document.getElementById('intermediateCard');
      const professionalCard = document.getElementById('professionalCard');

      // Variables utilisateur
      let currentUser = null;
      let userData = {
        isReseller: false,
        resellerLevel: null,
        resellerOrdersCount: 0,
        weeklyOrdersCount: 0,
        discountRate: 0,
        balance: 0,
        totalSavings: 0
      };
      let userListener = null;

      // Initialisation
      function initializePage() {
        auth.onAuthStateChanged(async (user) => {
          if (user) {
            currentUser = user;
            setupUserListener();
          } else {
            // Redirection vers la page de connexion (tu peux commenter si tu veux tester sans login)
            // window.location.href = "login.html";
            // Pour test local sans auth, commenter la ligne ci-dessus.
          }
        });
      }
      
      // Configurer l'écouteur Firestore en temps réel
      function setupUserListener() {
        if (!currentUser) return;
        
        const userRef = db.collection("users").doc(currentUser.uid);
        
        // Détacher tout écouteur précédent
        if (userListener) {
          userListener();
        }
        
        // Configurer un nouvel écouteur en temps réel
        userListener = userRef.onSnapshot((doc) => {
          if (doc.exists) {
            // merge doc data with defaults to avoid undefined
            const data = doc.data();
            userData = Object.assign({
              isReseller: false,
              resellerLevel: null,
              resellerOrdersCount: 0,
              weeklyOrdersCount: 0,
              discountRate: 0,
              balance: 0,
              totalSavings: 0
            }, data);
            updateUI();
          }
        }, (error) => {
          console.error("Erreur de l'écouteur Firestore:", error);
          //alerte discrète possible
        });
      }

      // Mettre à jour l'affichage du solde
      function updateBalanceDisplay() {
        balanceSpinner.style.display = 'none';
        if (typeof userData.balance === 'number') {
          balanceEl.textContent = `${userData.balance.toLocaleString('fr-FR')} FCFA`;
        } else if (userData.balance) {
          balanceEl.textContent = String(userData.balance);
        } else {
          balanceEl.textContent = `0 FCFA`;
        }
      }

      // Mettre à jour toute l'interface
      function updateUI() {
        updateBalanceDisplay();
        updateResellerUI();
        updatePricesWithDiscount();
        updateLevelIndicators();
        setupScrollAnimations();
      }

      // Mettre à jour l'interface en fonction du statut revendeur
      function updateResellerUI() {
        levelSpinner.style.display = 'none';
        ordersSpinner.style.display = 'none';
        weeklySpinner.style.display = 'none';
        discountSpinner.style.display = 'none';
        
        if (userData.isReseller) {
          becomeResellerBtn.style.display = 'none';
          ordersBtn.style.display = 'flex';
          commanderBtn.style.display = 'flex';
          dashboardBtn.style.display = 'flex';
          resignBtn.style.display = 'flex';

          currentLevelEl.querySelector('span').textContent = userData.resellerLevel ? String(userData.resellerLevel).charAt(0).toUpperCase() + String(userData.resellerLevel).slice(1) : "Non défini";
          totalOrdersEl.querySelector('span').textContent = userData.resellerOrdersCount || 0;
          weeklyOrdersEl.querySelector('span').textContent = userData.weeklyOrdersCount || 0;
          discountRateEl.querySelector('span').textContent = (userData.discountRate || 0) + "%";
          savingsAmountEl.textContent = (userData.totalSavings || 0).toLocaleString('fr-FR') + " FCFA";
        } else {
          becomeResellerBtn.style.display = 'flex';
          ordersBtn.style.display = 'none';
          commanderBtn.style.display = 'none';
          dashboardBtn.style.display = 'none';
          resignBtn.style.display = 'none';

          currentLevelEl.querySelector('span').textContent = "Non revendeur";
          totalOrdersEl.querySelector('span').textContent = "0";
          weeklyOrdersEl.querySelector('span').textContent = "0";
          discountRateEl.querySelector('span').textContent = "0%";
          savingsAmountEl.textContent = "0 FCFA";
        }
      }

      // Mettre à jour les indicateurs de niveau actif
      function updateLevelIndicators() {
        // Supprimer tous les indicateurs existants
        document.querySelectorAll('.current-level-indicator').forEach(el => el.remove());
        
        if (userData.isReseller && userData.resellerLevel) {
          let activeCard;
          switch(userData.resellerLevel) {
            case 'beginner': activeCard = beginnerCard; break;
            case 'amateur': activeCard = amateurCard; break;
            case 'intermediate': activeCard = intermediateCard; break;
            case 'professional': activeCard = professionalCard; break;
          }
          
          if (activeCard) {
            const indicator = document.createElement('div');
            indicator.className = 'current-level-indicator';
            indicator.innerHTML = '<i class="fas fa-check"></i>';
            activeCard.appendChild(indicator);
            
            // Ajouter un effet de surbrillance
            activeCard.style.boxShadow = `0 0 20px ${getLevelColor(userData.resellerLevel)}`;
            activeCard.style.transform = 'scale(1.05)';
          }
        }
      }
      
      // Obtenir la couleur associée à un niveau
      function getLevelColor(level) {
        switch(level) {
          case 'beginner': return 'rgba(66, 165, 245, 0.5)';
          case 'amateur': return 'rgba(76, 175, 80, 0.5)';
          case 'intermediate': return 'rgba(255, 193, 7, 0.5)';
          case 'professional': return 'rgba(255, 87, 34, 0.5)';
          default: return 'rgba(255, 255, 255, 0.5)';
        }
      }

      // Mettre à jour les prix affichés avec la remise
      function updatePricesWithDiscount() {
        let discountPercentage = 0;
        if (userData.isReseller && userData.discountRate) {
          discountPercentage = Number(userData.discountRate);
        }

        const normalPrices = document.querySelectorAll('.normal-price');
        const resellerPrices = document.querySelectorAll('.reseller-price');
        const savingsElements = document.querySelectorAll('.savings-percent');

        resellerPrices.forEach((element, index) => {
          const normalEl = normalPrices[index];
          const savingsEl = savingsElements[index];
          if (!normalEl) return;
          
          const originalPrice = element.getAttribute('data-original');
          if (!originalPrice) return;
          
          const normalPriceValue = parseInt(originalPrice, 10);
          if (!isNaN(normalPriceValue)) {
            const discountedPrice = Math.round(normalPriceValue * (1 - discountPercentage / 100));
            element.textContent = `${discountedPrice.toLocaleString('fr-FR')} FCFA`;
            
            if (savingsEl) {
              savingsEl.textContent = `${discountPercentage}%`;
            }
          }
        });
      }

      // Configurer les animations au défilement
      function setupScrollAnimations() {
        const scrollElements = document.querySelectorAll('.scroll-animate');
        
        const elementInView = (el, dividend = 1) => {
          const elementTop = el.getBoundingClientRect().top;
          return (
            elementTop <= (window.innerHeight || document.documentElement.clientHeight) / dividend
          );
        };
        
        const displayScrollElement = (element) => {
          element.classList.add('visible');
        };

        const hideScrollElement = (element) => {
          element.classList.remove('visible');
        };
        
        const handleScrollAnimation = () => {
          scrollElements.forEach((el) => {
            if (elementInView(el, 1.2)) {
              displayScrollElement(el);
            } else {
              hideScrollElement(el);
            }
          });
        };
        
        window.addEventListener('scroll', () => {
          handleScrollAnimation();
        });
        
        // Initial check
        handleScrollAnimation();
      }

      // Fonction pour devenir revendeur
      async function becomeReseller() {
        try {
          if (!currentUser) {
            alert("Veuillez vous connecter pour devenir revendeur");
            return;
          }
          becomeResellerBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Activation...';
          becomeResellerBtn.disabled = true;

          await db.collection("users").doc(currentUser.uid).set({
            isReseller: true,
            resellerLevel: "beginner",
            discountRate: 5,
            resellerOrdersCount: 0,
            weeklyOrdersCount: 0,
            resellerSince: firebase.firestore.FieldValue.serverTimestamp()
          }, { merge: true });

          alert("Félicitations ! Vous êtes maintenant revendeur avec le niveau Débutant (5% de remise).");
        } catch (error) {
          console.error("Erreur de mise à jour du statut:", error);
          alert("Une erreur est survenue. Veuillez réessayer.");
          becomeResellerBtn.innerHTML = '<i class="fas fa-user-plus"></i> Devenir Revendeur';
          becomeResellerBtn.disabled = false;
        }
      }

      // Fonction pour démissionner du statut de revendeur
      async function resignAsReseller() {
        try {
          if (!currentUser || !userData.isReseller) return;

          const confirmResign = confirm("Êtes-vous sûr de vouloir démissionner de votre statut de revendeur ? Vous perdrez toutes vos remises et avantages.");
          if (!confirmResign) return;

          resignBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Démission...';
          resignBtn.disabled = true;

          await db.collection("users").doc(currentUser.uid).set({
            isReseller: false,
            resellerLevel: null,
            discountRate: 0,
            resellerOrdersCount: 0,
            weeklyOrdersCount: 0,
            resellerEnded: firebase.firestore.FieldValue.serverTimestamp()
          }, { merge: true });

          alert("Vous avez démissionné avec succès de votre statut de revendeur. Vos remises ont été désactivées.");
        } catch (error) {
          console.error("Erreur lors de la démission:", error);
          alert("Une erreur est survenue. Veuillez réessayer.");
          resignBtn.innerHTML = '<i class="fas fa-sign-out-alt"></i> Démissionner';
          resignBtn.disabled = false;
        }
      }

      // Attacher les événements
      function attachEvents() {
        becomeResellerBtn.addEventListener('click', becomeReseller);
        resignBtn.addEventListener('click', resignAsReseller);
        quickDeposit.addEventListener('click', () => {
          window.location.href = "fonds.html";
        });
      }

      // Initialiser
      initializePage();
      attachEvents();
      setupScrollAnimations();
    });
  </script>
</body>
</html>